import{e as ve,c as C,g as bn,v as ae,a as Kn,s as Jn,_ as ir,i as Ye,b as Le,C as qt,E as Me,t as ue,d as yn,f as le,h as Ot,P as G,j as rr,u as sr,k as Ne,R as jo,l as ar,m as lr,D as cr,A as ur,n as Fo,Q as et,H as xt,T as Qn,o as Wo,p as fr,q as $n,r as Bt,w as eo,x as dr}from"./vendor_chartjs-Ya_qEvae.js";function hr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Gt={exports:{}},Kt={};var to;function gr(){return to||(to=1,(function(e){function t(y,w){var x=y.length;y.push(w);e:for(;0<x;){var _=x-1>>>1,A=y[_];if(0<i(A,w))y[_]=w,y[x]=A,x=_;else break e}}function n(y){return y.length===0?null:y[0]}function o(y){if(y.length===0)return null;var w=y[0],x=y.pop();if(x!==w){y[0]=x;e:for(var _=0,A=y.length,Ie=A>>>1;_<Ie;){var ee=2*(_+1)-1,Ze=y[ee],q=ee+1,ke=y[q];if(0>i(Ze,x))q<A&&0>i(ke,Ze)?(y[_]=ke,y[q]=x,_=q):(y[_]=Ze,y[ee]=x,_=ee);else if(q<A&&0>i(ke,x))y[_]=ke,y[q]=x,_=q;else break e}}return w}function i(y,w){var x=y.sortIndex-w.sortIndex;return x!==0?x:y.id-w.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;e.unstable_now=function(){return r.now()}}else{var s=Date,c=s.now();e.unstable_now=function(){return s.now()-c}}var f=[],d=[],g=1,p=null,b=3,T=!1,P=!1,E=!1,Y=!1,R=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,L=typeof setImmediate<"u"?setImmediate:null;function N(y){for(var w=n(d);w!==null;){if(w.callback===null)o(d);else if(w.startTime<=y)o(d),w.sortIndex=w.expirationTime,t(f,w);else break;w=n(d)}}function K(y){if(E=!1,N(y),!P)if(n(f)!==null)P=!0,V||(V=!0,Z());else{var w=n(d);w!==null&&Ve(K,w.startTime-y)}}var V=!1,J=-1,We=5,Q=-1;function Te(){return Y?!0:!(e.unstable_now()-Q<We)}function $(){if(Y=!1,V){var y=e.unstable_now();Q=y;var w=!0;try{e:{P=!1,E&&(E=!1,M(J),J=-1),T=!0;var x=b;try{t:{for(N(y),p=n(f);p!==null&&!(p.expirationTime>y&&Te());){var _=p.callback;if(typeof _=="function"){p.callback=null,b=p.priorityLevel;var A=_(p.expirationTime<=y);if(y=e.unstable_now(),typeof A=="function"){p.callback=A,N(y),w=!0;break t}p===n(f)&&o(f),N(y)}else o(f);p=n(f)}if(p!==null)w=!0;else{var Ie=n(d);Ie!==null&&Ve(K,Ie.startTime-y),w=!1}}break e}finally{p=null,b=x,T=!1}w=void 0}}finally{w?Z():V=!1}}}var Z;if(typeof L=="function")Z=function(){L($)};else if(typeof MessageChannel<"u"){var Ue=new MessageChannel,Ae=Ue.port2;Ue.port1.onmessage=$,Z=function(){Ae.postMessage(null)}}else Z=function(){R($,0)};function Ve(y,w){J=R(function(){y(e.unstable_now())},w)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(y){y.callback=null},e.unstable_forceFrameRate=function(y){0>y||125<y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):We=0<y?Math.floor(1e3/y):5},e.unstable_getCurrentPriorityLevel=function(){return b},e.unstable_next=function(y){switch(b){case 1:case 2:case 3:var w=3;break;default:w=b}var x=b;b=w;try{return y()}finally{b=x}},e.unstable_requestPaint=function(){Y=!0},e.unstable_runWithPriority=function(y,w){switch(y){case 1:case 2:case 3:case 4:case 5:break;default:y=3}var x=b;b=y;try{return w()}finally{b=x}},e.unstable_scheduleCallback=function(y,w,x){var _=e.unstable_now();switch(typeof x=="object"&&x!==null?(x=x.delay,x=typeof x=="number"&&0<x?_+x:_):x=_,y){case 1:var A=-1;break;case 2:A=250;break;case 5:A=1073741823;break;case 4:A=1e4;break;default:A=5e3}return A=x+A,y={id:g++,callback:w,priorityLevel:y,startTime:x,expirationTime:A,sortIndex:-1},x>_?(y.sortIndex=x,t(d,y),n(f)===null&&y===n(d)&&(E?(M(J),J=-1):E=!0,Ve(K,x-_))):(y.sortIndex=A,t(f,y),P||T||(P=!0,V||(V=!0,Z()))),y},e.unstable_shouldYield=Te,e.unstable_wrapCallback=function(y){var w=b;return function(){var x=b;b=w;try{return y.apply(this,arguments)}finally{b=x}}}})(Kt)),Kt}var no;function el(){return no||(no=1,Gt.exports=gr()),Gt.exports}function lt(e){return e+.5|0}const ge=(e,t,n)=>Math.max(Math.min(e,n),t);function ot(e){return ge(lt(e*2.55),0,255)}function me(e){return ge(lt(e*255),0,255)}function se(e){return ge(lt(e/2.55)/100,0,1)}function oo(e){return ge(lt(e*100),0,100)}const U={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},tn=[..."0123456789ABCDEF"],mr=e=>tn[e&15],pr=e=>tn[(e&240)>>4]+tn[e&15],St=e=>(e&240)>>4===(e&15),br=e=>St(e.r)&&St(e.g)&&St(e.b)&&St(e.a);function yr(e){var t=e.length,n;return e[0]==="#"&&(t===4||t===5?n={r:255&U[e[1]]*17,g:255&U[e[2]]*17,b:255&U[e[3]]*17,a:t===5?U[e[4]]*17:255}:(t===7||t===9)&&(n={r:U[e[1]]<<4|U[e[2]],g:U[e[3]]<<4|U[e[4]],b:U[e[5]]<<4|U[e[6]],a:t===9?U[e[7]]<<4|U[e[8]]:255})),n}const vr=(e,t)=>e<255?t(e):"";function Tr(e){var t=br(e)?mr:pr;return e?"#"+t(e.r)+t(e.g)+t(e.b)+vr(e.a,t):void 0}const wr=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Uo(e,t,n){const o=t*Math.min(n,1-n),i=(r,s=(r+e/30)%12)=>n-o*Math.max(Math.min(s-3,9-s,1),-1);return[i(0),i(8),i(4)]}function xr(e,t,n){const o=(i,r=(i+e/60)%6)=>n-n*t*Math.max(Math.min(r,4-r,1),0);return[o(5),o(3),o(1)]}function Sr(e,t,n){const o=Uo(e,1,.5);let i;for(t+n>1&&(i=1/(t+n),t*=i,n*=i),i=0;i<3;i++)o[i]*=1-t-n,o[i]+=t;return o}function Pr(e,t,n,o,i){return e===i?(t-n)/o+(t<n?6:0):t===i?(n-e)/o+2:(e-t)/o+4}function vn(e){const n=e.r/255,o=e.g/255,i=e.b/255,r=Math.max(n,o,i),s=Math.min(n,o,i),c=(r+s)/2;let f,d,g;return r!==s&&(g=r-s,d=c>.5?g/(2-r-s):g/(r+s),f=Pr(n,o,i,g,r),f=f*60+.5),[f|0,d||0,c]}function Tn(e,t,n,o){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,o)).map(me)}function wn(e,t,n){return Tn(Uo,e,t,n)}function Er(e,t,n){return Tn(Sr,e,t,n)}function Mr(e,t,n){return Tn(xr,e,t,n)}function Vo(e){return(e%360+360)%360}function Cr(e){const t=wr.exec(e);let n=255,o;if(!t)return;t[5]!==o&&(n=t[6]?ot(+t[5]):me(+t[5]));const i=Vo(+t[2]),r=+t[3]/100,s=+t[4]/100;return t[1]==="hwb"?o=Er(i,r,s):t[1]==="hsv"?o=Mr(i,r,s):o=wn(i,r,s),{r:o[0],g:o[1],b:o[2],a:n}}function _r(e,t){var n=vn(e);n[0]=Vo(n[0]+t),n=wn(n),e.r=n[0],e.g=n[1],e.b=n[2]}function Or(e){if(!e)return;const t=vn(e),n=t[0],o=oo(t[1]),i=oo(t[2]);return e.a<255?`hsla(${n}, ${o}%, ${i}%, ${se(e.a)})`:`hsl(${n}, ${o}%, ${i}%)`}const io={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},ro={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Ar(){const e={},t=Object.keys(ro),n=Object.keys(io);let o,i,r,s,c;for(o=0;o<t.length;o++){for(s=c=t[o],i=0;i<n.length;i++)r=n[i],c=c.replace(r,io[r]);r=parseInt(ro[s],16),e[c]=[r>>16&255,r>>8&255,r&255]}return e}let Pt;function Ir(e){Pt||(Pt=Ar(),Pt.transparent=[0,0,0,0]);const t=Pt[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const kr=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function Dr(e){const t=kr.exec(e);let n=255,o,i,r;if(t){if(t[7]!==o){const s=+t[7];n=t[8]?ot(s):ge(s*255,0,255)}return o=+t[1],i=+t[3],r=+t[5],o=255&(t[2]?ot(o):ge(o,0,255)),i=255&(t[4]?ot(i):ge(i,0,255)),r=255&(t[6]?ot(r):ge(r,0,255)),{r:o,g:i,b:r,a:n}}}function Rr(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${se(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}const Jt=e=>e<=.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055,Re=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function Nr(e,t,n){const o=Re(se(e.r)),i=Re(se(e.g)),r=Re(se(e.b));return{r:me(Jt(o+n*(Re(se(t.r))-o))),g:me(Jt(i+n*(Re(se(t.g))-i))),b:me(Jt(r+n*(Re(se(t.b))-r))),a:e.a+n*(t.a-e.a)}}function Et(e,t,n){if(e){let o=vn(e);o[t]=Math.max(0,Math.min(o[t]+o[t]*n,t===0?360:1)),o=wn(o),e.r=o[0],e.g=o[1],e.b=o[2]}}function Zo(e,t){return e&&Object.assign(t||{},e)}function so(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=me(e[3]))):(t=Zo(e,{r:0,g:0,b:0,a:1}),t.a=me(t.a)),t}function Yr(e){return e.charAt(0)==="r"?Dr(e):Cr(e)}class nn{constructor(t){if(t instanceof nn)return t;const n=typeof t;let o;n==="object"?o=so(t):n==="string"&&(o=yr(t)||Ir(t)||Yr(t)),this._rgb=o,this._valid=!!o}get valid(){return this._valid}get rgb(){var t=Zo(this._rgb);return t&&(t.a=se(t.a)),t}set rgb(t){this._rgb=so(t)}rgbString(){return this._valid?Rr(this._rgb):void 0}hexString(){return this._valid?Tr(this._rgb):void 0}hslString(){return this._valid?Or(this._rgb):void 0}mix(t,n){if(t){const o=this.rgb,i=t.rgb;let r;const s=n===r?.5:n,c=2*s-1,f=o.a-i.a,d=((c*f===-1?c:(c+f)/(1+c*f))+1)/2;r=1-d,o.r=255&d*o.r+r*i.r+.5,o.g=255&d*o.g+r*i.g+.5,o.b=255&d*o.b+r*i.b+.5,o.a=s*o.a+(1-s)*i.a,this.rgb=o}return this}interpolate(t,n){return t&&(this._rgb=Nr(this._rgb,t._rgb,n)),this}clone(){return new nn(this.rgb)}alpha(t){return this._rgb.a=me(t),this}clearer(t){const n=this._rgb;return n.a*=1-t,this}greyscale(){const t=this._rgb,n=lt(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=n,this}opaquer(t){const n=this._rgb;return n.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return Et(this._rgb,2,t),this}darken(t){return Et(this._rgb,2,-t),this}saturate(t){return Et(this._rgb,1,t),this}desaturate(t){return Et(this._rgb,1,-t),this}rotate(t){return _r(this._rgb,t),this}}var Qt={exports:{}};var ao;function Lr(){return ao||(ao=1,(function(e){(function(t,n,o,i){var r=["","webkit","Moz","MS","ms","o"],s=n.createElement("div"),c="function",f=Math.round,d=Math.abs,g=Date.now;function p(a,l,u){return setTimeout(L(a,u),l)}function b(a,l,u){return Array.isArray(a)?(T(a,u[l],u),!0):!1}function T(a,l,u){var h;if(a)if(a.forEach)a.forEach(l,u);else if(a.length!==i)for(h=0;h<a.length;)l.call(u,a[h],h,a),h++;else for(h in a)a.hasOwnProperty(h)&&l.call(u,a[h],h,a)}function P(a,l,u){var h="DEPRECATED METHOD: "+l+`
`+u+` AT 
`;return function(){var m=new Error("get-stack-trace"),v=m&&m.stack?m.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",S=t.console&&(t.console.warn||t.console.log);return S&&S.call(t.console,h,v),a.apply(this,arguments)}}var E;typeof Object.assign!="function"?E=function(l){if(l===i||l===null)throw new TypeError("Cannot convert undefined or null to object");for(var u=Object(l),h=1;h<arguments.length;h++){var m=arguments[h];if(m!==i&&m!==null)for(var v in m)m.hasOwnProperty(v)&&(u[v]=m[v])}return u}:E=Object.assign;var Y=P(function(l,u,h){for(var m=Object.keys(u),v=0;v<m.length;)(!h||h&&l[m[v]]===i)&&(l[m[v]]=u[m[v]]),v++;return l},"extend","Use `assign`."),R=P(function(l,u){return Y(l,u,!0)},"merge","Use `assign`.");function M(a,l,u){var h=l.prototype,m;m=a.prototype=Object.create(h),m.constructor=a,m._super=h,u&&E(m,u)}function L(a,l){return function(){return a.apply(l,arguments)}}function N(a,l){return typeof a==c?a.apply(l&&l[0]||i,l):a}function K(a,l){return a===i?l:a}function V(a,l,u){T(Te(l),function(h){a.addEventListener(h,u,!1)})}function J(a,l,u){T(Te(l),function(h){a.removeEventListener(h,u,!1)})}function We(a,l){for(;a;){if(a==l)return!0;a=a.parentNode}return!1}function Q(a,l){return a.indexOf(l)>-1}function Te(a){return a.trim().split(/\s+/g)}function $(a,l,u){if(a.indexOf&&!u)return a.indexOf(l);for(var h=0;h<a.length;){if(u&&a[h][u]==l||!u&&a[h]===l)return h;h++}return-1}function Z(a){return Array.prototype.slice.call(a,0)}function Ue(a,l,u){for(var h=[],m=[],v=0;v<a.length;){var S=a[v][l];$(m,S)<0&&h.push(a[v]),m[v]=S,v++}return h=h.sort(function(D,X){return D[l]>X[l]}),h}function Ae(a,l){for(var u,h,m=l[0].toUpperCase()+l.slice(1),v=0;v<r.length;){if(u=r[v],h=u?u+m:l,h in a)return h;v++}return i}var Ve=1;function y(){return Ve++}function w(a){var l=a.ownerDocument||a;return l.defaultView||l.parentWindow||t}var x=/mobile|tablet|ip(ad|hone|od)|android/i,_="ontouchstart"in t,A=Ae(t,"PointerEvent")!==i,Ie=_&&x.test(navigator.userAgent),ee="touch",Ze="pen",q="mouse",ke="kinect",Ai=25,z=1,we=2,I=4,H=8,dt=1,qe=2,Be=4,Ge=8,Ke=16,te=qe|Be,xe=Ge|Ke,In=te|xe,kn=["x","y"],ht=["clientX","clientY"];function F(a,l){var u=this;this.manager=a,this.callback=l,this.element=a.element,this.target=a.options.inputTarget,this.domHandler=function(h){N(a.options.enable,[a])&&u.handler(h)},this.init()}F.prototype={handler:function(){},init:function(){this.evEl&&V(this.element,this.evEl,this.domHandler),this.evTarget&&V(this.target,this.evTarget,this.domHandler),this.evWin&&V(w(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&J(this.element,this.evEl,this.domHandler),this.evTarget&&J(this.target,this.evTarget,this.domHandler),this.evWin&&J(w(this.element),this.evWin,this.domHandler)}};function Ii(a){var l,u=a.options.inputClass;return u?l=u:A?l=zt:Ie?l=pt:_?l=Xt:l=mt,new l(a,ki)}function ki(a,l,u){var h=u.pointers.length,m=u.changedPointers.length,v=l&z&&h-m===0,S=l&(I|H)&&h-m===0;u.isFirst=!!v,u.isFinal=!!S,v&&(a.session={}),u.eventType=l,Di(a,u),a.emit("hammer.input",u),a.recognize(u),a.session.prevInput=u}function Di(a,l){var u=a.session,h=l.pointers,m=h.length;u.firstInput||(u.firstInput=Dn(l)),m>1&&!u.firstMultiple?u.firstMultiple=Dn(l):m===1&&(u.firstMultiple=!1);var v=u.firstInput,S=u.firstMultiple,k=S?S.center:v.center,D=l.center=Rn(h);l.timeStamp=g(),l.deltaTime=l.timeStamp-v.timeStamp,l.angle=Lt(k,D),l.distance=gt(k,D),Ri(u,l),l.offsetDirection=Yn(l.deltaX,l.deltaY);var X=Nn(l.deltaTime,l.deltaX,l.deltaY);l.overallVelocityX=X.x,l.overallVelocityY=X.y,l.overallVelocity=d(X.x)>d(X.y)?X.x:X.y,l.scale=S?Li(S.pointers,h):1,l.rotation=S?Yi(S.pointers,h):0,l.maxPointers=u.prevInput?l.pointers.length>u.prevInput.maxPointers?l.pointers.length:u.prevInput.maxPointers:l.pointers.length,Ni(u,l);var oe=a.element;We(l.srcEvent.target,oe)&&(oe=l.srcEvent.target),l.target=oe}function Ri(a,l){var u=l.center,h=a.offsetDelta||{},m=a.prevDelta||{},v=a.prevInput||{};(l.eventType===z||v.eventType===I)&&(m=a.prevDelta={x:v.deltaX||0,y:v.deltaY||0},h=a.offsetDelta={x:u.x,y:u.y}),l.deltaX=m.x+(u.x-h.x),l.deltaY=m.y+(u.y-h.y)}function Ni(a,l){var u=a.lastInterval||l,h=l.timeStamp-u.timeStamp,m,v,S,k;if(l.eventType!=H&&(h>Ai||u.velocity===i)){var D=l.deltaX-u.deltaX,X=l.deltaY-u.deltaY,oe=Nn(h,D,X);v=oe.x,S=oe.y,m=d(oe.x)>d(oe.y)?oe.x:oe.y,k=Yn(D,X),a.lastInterval=l}else m=u.velocity,v=u.velocityX,S=u.velocityY,k=u.direction;l.velocity=m,l.velocityX=v,l.velocityY=S,l.direction=k}function Dn(a){for(var l=[],u=0;u<a.pointers.length;)l[u]={clientX:f(a.pointers[u].clientX),clientY:f(a.pointers[u].clientY)},u++;return{timeStamp:g(),pointers:l,center:Rn(l),deltaX:a.deltaX,deltaY:a.deltaY}}function Rn(a){var l=a.length;if(l===1)return{x:f(a[0].clientX),y:f(a[0].clientY)};for(var u=0,h=0,m=0;m<l;)u+=a[m].clientX,h+=a[m].clientY,m++;return{x:f(u/l),y:f(h/l)}}function Nn(a,l,u){return{x:l/a||0,y:u/a||0}}function Yn(a,l){return a===l?dt:d(a)>=d(l)?a<0?qe:Be:l<0?Ge:Ke}function gt(a,l,u){u||(u=kn);var h=l[u[0]]-a[u[0]],m=l[u[1]]-a[u[1]];return Math.sqrt(h*h+m*m)}function Lt(a,l,u){u||(u=kn);var h=l[u[0]]-a[u[0]],m=l[u[1]]-a[u[1]];return Math.atan2(m,h)*180/Math.PI}function Yi(a,l){return Lt(l[1],l[0],ht)+Lt(a[1],a[0],ht)}function Li(a,l){return gt(l[0],l[1],ht)/gt(a[0],a[1],ht)}var zi={mousedown:z,mousemove:we,mouseup:I},Xi="mousedown",Hi="mousemove mouseup";function mt(){this.evEl=Xi,this.evWin=Hi,this.pressed=!1,F.apply(this,arguments)}M(mt,F,{handler:function(l){var u=zi[l.type];u&z&&l.button===0&&(this.pressed=!0),u&we&&l.which!==1&&(u=I),this.pressed&&(u&I&&(this.pressed=!1),this.callback(this.manager,u,{pointers:[l],changedPointers:[l],pointerType:q,srcEvent:l}))}});var ji={pointerdown:z,pointermove:we,pointerup:I,pointercancel:H,pointerout:H},Fi={2:ee,3:Ze,4:q,5:ke},Ln="pointerdown",zn="pointermove pointerup pointercancel";t.MSPointerEvent&&!t.PointerEvent&&(Ln="MSPointerDown",zn="MSPointerMove MSPointerUp MSPointerCancel");function zt(){this.evEl=Ln,this.evWin=zn,F.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}M(zt,F,{handler:function(l){var u=this.store,h=!1,m=l.type.toLowerCase().replace("ms",""),v=ji[m],S=Fi[l.pointerType]||l.pointerType,k=S==ee,D=$(u,l.pointerId,"pointerId");v&z&&(l.button===0||k)?D<0&&(u.push(l),D=u.length-1):v&(I|H)&&(h=!0),!(D<0)&&(u[D]=l,this.callback(this.manager,v,{pointers:u,changedPointers:[l],pointerType:S,srcEvent:l}),h&&u.splice(D,1))}});var Wi={touchstart:z,touchmove:we,touchend:I,touchcancel:H},Ui="touchstart",Vi="touchstart touchmove touchend touchcancel";function Xn(){this.evTarget=Ui,this.evWin=Vi,this.started=!1,F.apply(this,arguments)}M(Xn,F,{handler:function(l){var u=Wi[l.type];if(u===z&&(this.started=!0),!!this.started){var h=Zi.call(this,l,u);u&(I|H)&&h[0].length-h[1].length===0&&(this.started=!1),this.callback(this.manager,u,{pointers:h[0],changedPointers:h[1],pointerType:ee,srcEvent:l})}}});function Zi(a,l){var u=Z(a.touches),h=Z(a.changedTouches);return l&(I|H)&&(u=Ue(u.concat(h),"identifier")),[u,h]}var qi={touchstart:z,touchmove:we,touchend:I,touchcancel:H},Bi="touchstart touchmove touchend touchcancel";function pt(){this.evTarget=Bi,this.targetIds={},F.apply(this,arguments)}M(pt,F,{handler:function(l){var u=qi[l.type],h=Gi.call(this,l,u);h&&this.callback(this.manager,u,{pointers:h[0],changedPointers:h[1],pointerType:ee,srcEvent:l})}});function Gi(a,l){var u=Z(a.touches),h=this.targetIds;if(l&(z|we)&&u.length===1)return h[u[0].identifier]=!0,[u,u];var m,v,S=Z(a.changedTouches),k=[],D=this.target;if(v=u.filter(function(X){return We(X.target,D)}),l===z)for(m=0;m<v.length;)h[v[m].identifier]=!0,m++;for(m=0;m<S.length;)h[S[m].identifier]&&k.push(S[m]),l&(I|H)&&delete h[S[m].identifier],m++;if(k.length)return[Ue(v.concat(k),"identifier"),k]}var Ki=2500,Hn=25;function Xt(){F.apply(this,arguments);var a=L(this.handler,this);this.touch=new pt(this.manager,a),this.mouse=new mt(this.manager,a),this.primaryTouch=null,this.lastTouches=[]}M(Xt,F,{handler:function(l,u,h){var m=h.pointerType==ee,v=h.pointerType==q;if(!(v&&h.sourceCapabilities&&h.sourceCapabilities.firesTouchEvents)){if(m)Ji.call(this,u,h);else if(v&&Qi.call(this,h))return;this.callback(l,u,h)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function Ji(a,l){a&z?(this.primaryTouch=l.changedPointers[0].identifier,jn.call(this,l)):a&(I|H)&&jn.call(this,l)}function jn(a){var l=a.changedPointers[0];if(l.identifier===this.primaryTouch){var u={x:l.clientX,y:l.clientY};this.lastTouches.push(u);var h=this.lastTouches,m=function(){var v=h.indexOf(u);v>-1&&h.splice(v,1)};setTimeout(m,Ki)}}function Qi(a){for(var l=a.srcEvent.clientX,u=a.srcEvent.clientY,h=0;h<this.lastTouches.length;h++){var m=this.lastTouches[h],v=Math.abs(l-m.x),S=Math.abs(u-m.y);if(v<=Hn&&S<=Hn)return!0}return!1}var Fn=Ae(s.style,"touchAction"),Wn=Fn!==i,Un="compute",Vn="auto",Ht="manipulation",Se="none",Je="pan-x",Qe="pan-y",bt=er();function jt(a,l){this.manager=a,this.set(l)}jt.prototype={set:function(a){a==Un&&(a=this.compute()),Wn&&this.manager.element.style&&bt[a]&&(this.manager.element.style[Fn]=a),this.actions=a.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var a=[];return T(this.manager.recognizers,function(l){N(l.options.enable,[l])&&(a=a.concat(l.getTouchAction()))}),$i(a.join(" "))},preventDefaults:function(a){var l=a.srcEvent,u=a.offsetDirection;if(this.manager.session.prevented){l.preventDefault();return}var h=this.actions,m=Q(h,Se)&&!bt[Se],v=Q(h,Qe)&&!bt[Qe],S=Q(h,Je)&&!bt[Je];if(m){var k=a.pointers.length===1,D=a.distance<2,X=a.deltaTime<250;if(k&&D&&X)return}if(!(S&&v)&&(m||v&&u&te||S&&u&xe))return this.preventSrc(l)},preventSrc:function(a){this.manager.session.prevented=!0,a.preventDefault()}};function $i(a){if(Q(a,Se))return Se;var l=Q(a,Je),u=Q(a,Qe);return l&&u?Se:l||u?l?Je:Qe:Q(a,Ht)?Ht:Vn}function er(){if(!Wn)return!1;var a={},l=t.CSS&&t.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(u){a[u]=l?t.CSS.supports("touch-action",u):!0}),a}var yt=1,W=2,De=4,fe=8,ie=fe,$e=16,ne=32;function re(a){this.options=E({},this.defaults,a||{}),this.id=y(),this.manager=null,this.options.enable=K(this.options.enable,!0),this.state=yt,this.simultaneous={},this.requireFail=[]}re.prototype={defaults:{},set:function(a){return E(this.options,a),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(a){if(b(a,"recognizeWith",this))return this;var l=this.simultaneous;return a=vt(a,this),l[a.id]||(l[a.id]=a,a.recognizeWith(this)),this},dropRecognizeWith:function(a){return b(a,"dropRecognizeWith",this)?this:(a=vt(a,this),delete this.simultaneous[a.id],this)},requireFailure:function(a){if(b(a,"requireFailure",this))return this;var l=this.requireFail;return a=vt(a,this),$(l,a)===-1&&(l.push(a),a.requireFailure(this)),this},dropRequireFailure:function(a){if(b(a,"dropRequireFailure",this))return this;a=vt(a,this);var l=$(this.requireFail,a);return l>-1&&this.requireFail.splice(l,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(a){return!!this.simultaneous[a.id]},emit:function(a){var l=this,u=this.state;function h(m){l.manager.emit(m,a)}u<fe&&h(l.options.event+Zn(u)),h(l.options.event),a.additionalEvent&&h(a.additionalEvent),u>=fe&&h(l.options.event+Zn(u))},tryEmit:function(a){if(this.canEmit())return this.emit(a);this.state=ne},canEmit:function(){for(var a=0;a<this.requireFail.length;){if(!(this.requireFail[a].state&(ne|yt)))return!1;a++}return!0},recognize:function(a){var l=E({},a);if(!N(this.options.enable,[this,l])){this.reset(),this.state=ne;return}this.state&(ie|$e|ne)&&(this.state=yt),this.state=this.process(l),this.state&(W|De|fe|$e)&&this.tryEmit(l)},process:function(a){},getTouchAction:function(){},reset:function(){}};function Zn(a){return a&$e?"cancel":a&fe?"end":a&De?"move":a&W?"start":""}function qn(a){return a==Ke?"down":a==Ge?"up":a==qe?"left":a==Be?"right":""}function vt(a,l){var u=l.manager;return u?u.get(a):a}function B(){re.apply(this,arguments)}M(B,re,{defaults:{pointers:1},attrTest:function(a){var l=this.options.pointers;return l===0||a.pointers.length===l},process:function(a){var l=this.state,u=a.eventType,h=l&(W|De),m=this.attrTest(a);return h&&(u&H||!m)?l|$e:h||m?u&I?l|fe:l&W?l|De:W:ne}});function Tt(){B.apply(this,arguments),this.pX=null,this.pY=null}M(Tt,B,{defaults:{event:"pan",threshold:10,pointers:1,direction:In},getTouchAction:function(){var a=this.options.direction,l=[];return a&te&&l.push(Qe),a&xe&&l.push(Je),l},directionTest:function(a){var l=this.options,u=!0,h=a.distance,m=a.direction,v=a.deltaX,S=a.deltaY;return m&l.direction||(l.direction&te?(m=v===0?dt:v<0?qe:Be,u=v!=this.pX,h=Math.abs(a.deltaX)):(m=S===0?dt:S<0?Ge:Ke,u=S!=this.pY,h=Math.abs(a.deltaY))),a.direction=m,u&&h>l.threshold&&m&l.direction},attrTest:function(a){return B.prototype.attrTest.call(this,a)&&(this.state&W||!(this.state&W)&&this.directionTest(a))},emit:function(a){this.pX=a.deltaX,this.pY=a.deltaY;var l=qn(a.direction);l&&(a.additionalEvent=this.options.event+l),this._super.emit.call(this,a)}});function Ft(){B.apply(this,arguments)}M(Ft,B,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Se]},attrTest:function(a){return this._super.attrTest.call(this,a)&&(Math.abs(a.scale-1)>this.options.threshold||this.state&W)},emit:function(a){if(a.scale!==1){var l=a.scale<1?"in":"out";a.additionalEvent=this.options.event+l}this._super.emit.call(this,a)}});function Wt(){re.apply(this,arguments),this._timer=null,this._input=null}M(Wt,re,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Vn]},process:function(a){var l=this.options,u=a.pointers.length===l.pointers,h=a.distance<l.threshold,m=a.deltaTime>l.time;if(this._input=a,!h||!u||a.eventType&(I|H)&&!m)this.reset();else if(a.eventType&z)this.reset(),this._timer=p(function(){this.state=ie,this.tryEmit()},l.time,this);else if(a.eventType&I)return ie;return ne},reset:function(){clearTimeout(this._timer)},emit:function(a){this.state===ie&&(a&&a.eventType&I?this.manager.emit(this.options.event+"up",a):(this._input.timeStamp=g(),this.manager.emit(this.options.event,this._input)))}});function Ut(){B.apply(this,arguments)}M(Ut,B,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Se]},attrTest:function(a){return this._super.attrTest.call(this,a)&&(Math.abs(a.rotation)>this.options.threshold||this.state&W)}});function Vt(){B.apply(this,arguments)}M(Vt,B,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:te|xe,pointers:1},getTouchAction:function(){return Tt.prototype.getTouchAction.call(this)},attrTest:function(a){var l=this.options.direction,u;return l&(te|xe)?u=a.overallVelocity:l&te?u=a.overallVelocityX:l&xe&&(u=a.overallVelocityY),this._super.attrTest.call(this,a)&&l&a.offsetDirection&&a.distance>this.options.threshold&&a.maxPointers==this.options.pointers&&d(u)>this.options.velocity&&a.eventType&I},emit:function(a){var l=qn(a.offsetDirection);l&&this.manager.emit(this.options.event+l,a),this.manager.emit(this.options.event,a)}});function wt(){re.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}M(wt,re,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Ht]},process:function(a){var l=this.options,u=a.pointers.length===l.pointers,h=a.distance<l.threshold,m=a.deltaTime<l.time;if(this.reset(),a.eventType&z&&this.count===0)return this.failTimeout();if(h&&m&&u){if(a.eventType!=I)return this.failTimeout();var v=this.pTime?a.timeStamp-this.pTime<l.interval:!0,S=!this.pCenter||gt(this.pCenter,a.center)<l.posThreshold;this.pTime=a.timeStamp,this.pCenter=a.center,!S||!v?this.count=1:this.count+=1,this._input=a;var k=this.count%l.taps;if(k===0)return this.hasRequireFailures()?(this._timer=p(function(){this.state=ie,this.tryEmit()},l.interval,this),W):ie}return ne},failTimeout:function(){return this._timer=p(function(){this.state=ne},this.options.interval,this),ne},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==ie&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function de(a,l){return l=l||{},l.recognizers=K(l.recognizers,de.defaults.preset),new Zt(a,l)}de.VERSION="2.0.7",de.defaults={domEvents:!1,touchAction:Un,enable:!0,inputTarget:null,inputClass:null,preset:[[Ut,{enable:!1}],[Ft,{enable:!1},["rotate"]],[Vt,{direction:te}],[Tt,{direction:te},["swipe"]],[wt],[wt,{event:"doubletap",taps:2},["tap"]],[Wt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var tr=1,Bn=2;function Zt(a,l){this.options=E({},de.defaults,l||{}),this.options.inputTarget=this.options.inputTarget||a,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=a,this.input=Ii(this),this.touchAction=new jt(this,this.options.touchAction),Gn(this,!0),T(this.options.recognizers,function(u){var h=this.add(new u[0](u[1]));u[2]&&h.recognizeWith(u[2]),u[3]&&h.requireFailure(u[3])},this)}Zt.prototype={set:function(a){return E(this.options,a),a.touchAction&&this.touchAction.update(),a.inputTarget&&(this.input.destroy(),this.input.target=a.inputTarget,this.input.init()),this},stop:function(a){this.session.stopped=a?Bn:tr},recognize:function(a){var l=this.session;if(!l.stopped){this.touchAction.preventDefaults(a);var u,h=this.recognizers,m=l.curRecognizer;(!m||m&&m.state&ie)&&(m=l.curRecognizer=null);for(var v=0;v<h.length;)u=h[v],l.stopped!==Bn&&(!m||u==m||u.canRecognizeWith(m))?u.recognize(a):u.reset(),!m&&u.state&(W|De|fe)&&(m=l.curRecognizer=u),v++}},get:function(a){if(a instanceof re)return a;for(var l=this.recognizers,u=0;u<l.length;u++)if(l[u].options.event==a)return l[u];return null},add:function(a){if(b(a,"add",this))return this;var l=this.get(a.options.event);return l&&this.remove(l),this.recognizers.push(a),a.manager=this,this.touchAction.update(),a},remove:function(a){if(b(a,"remove",this))return this;if(a=this.get(a),a){var l=this.recognizers,u=$(l,a);u!==-1&&(l.splice(u,1),this.touchAction.update())}return this},on:function(a,l){if(a!==i&&l!==i){var u=this.handlers;return T(Te(a),function(h){u[h]=u[h]||[],u[h].push(l)}),this}},off:function(a,l){if(a!==i){var u=this.handlers;return T(Te(a),function(h){l?u[h]&&u[h].splice($(u[h],l),1):delete u[h]}),this}},emit:function(a,l){this.options.domEvents&&nr(a,l);var u=this.handlers[a]&&this.handlers[a].slice();if(!(!u||!u.length)){l.type=a,l.preventDefault=function(){l.srcEvent.preventDefault()};for(var h=0;h<u.length;)u[h](l),h++}},destroy:function(){this.element&&Gn(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function Gn(a,l){var u=a.element;if(u.style){var h;T(a.options.cssProps,function(m,v){h=Ae(u.style,v),l?(a.oldCssProps[h]=u.style[h],u.style[h]=m):u.style[h]=a.oldCssProps[h]||""}),l||(a.oldCssProps={})}}function nr(a,l){var u=n.createEvent("Event");u.initEvent(a,!0,!0),u.gesture=l,l.target.dispatchEvent(u)}E(de,{INPUT_START:z,INPUT_MOVE:we,INPUT_END:I,INPUT_CANCEL:H,STATE_POSSIBLE:yt,STATE_BEGAN:W,STATE_CHANGED:De,STATE_ENDED:fe,STATE_RECOGNIZED:ie,STATE_CANCELLED:$e,STATE_FAILED:ne,DIRECTION_NONE:dt,DIRECTION_LEFT:qe,DIRECTION_RIGHT:Be,DIRECTION_UP:Ge,DIRECTION_DOWN:Ke,DIRECTION_HORIZONTAL:te,DIRECTION_VERTICAL:xe,DIRECTION_ALL:In,Manager:Zt,Input:F,TouchAction:jt,TouchInput:pt,MouseInput:mt,PointerEventInput:zt,TouchMouseInput:Xt,SingleTouchInput:Xn,Recognizer:re,AttrRecognizer:B,Tap:wt,Pan:Tt,Swipe:Vt,Pinch:Ft,Rotate:Ut,Press:Wt,on:V,off:J,each:T,merge:R,extend:Y,assign:E,inherit:M,bindFn:L,prefixed:Ae});var or=typeof t<"u"?t:typeof self<"u"?self:{};or.Hammer=de,e.exports?e.exports=de:t[o]=de})(window,document,"Hammer")})(Qt)),Qt.exports}var zr=Lr();const rt=hr(zr);const at=e=>e&&e.enabled&&e.modifierKey,qo=(e,t)=>e&&t[e+"Key"],xn=(e,t)=>e&&!t[e+"Key"];function be(e,t,n){return e===void 0?!0:typeof e=="string"?e.indexOf(t)!==-1:typeof e=="function"?e({chart:n}).indexOf(t)!==-1:!1}function $t(e,t){return typeof e=="function"&&(e=e({chart:t})),typeof e=="string"?{x:e.indexOf("x")!==-1,y:e.indexOf("y")!==-1}:{x:!1,y:!1}}function Xr(e,t){let n;return function(){return clearTimeout(n),n=setTimeout(e,t),t}}function Hr({x:e,y:t},n){const o=n.scales,i=Object.keys(o);for(let r=0;r<i.length;r++){const s=o[i[r]];if(t>=s.top&&t<=s.bottom&&e>=s.left&&e<=s.right)return s}return null}function Bo(e,t,n){const{mode:o="xy",scaleMode:i,overScaleMode:r}=e||{},s=Hr(t,n),c=$t(o,n),f=$t(i,n);if(r){const g=$t(r,n);for(const p of["x","y"])g[p]&&(f[p]=c[p],c[p]=!1)}if(s&&f[s.axis])return[s];const d=[];return ve(n.scales,function(g){c[g.axis]&&d.push(g)}),d}const on=new WeakMap;function O(e){let t=on.get(e);return t||(t={originalScaleLimits:{},updatedScaleLimits:{},handlers:{},panDelta:{},dragging:!1,panning:!1},on.set(e,t)),t}function jr(e){on.delete(e)}function Go(e,t,n,o){const i=Math.max(0,Math.min(1,(e-t)/n||0)),r=1-i;return{min:o*i,max:o*r}}function Ko(e,t){const n=e.isHorizontal()?t.x:t.y;return e.getValueForPixel(n)}function Jo(e,t,n){const o=e.max-e.min,i=o*(t-1),r=Ko(e,n);return Go(r,e.min,o,i)}function Fr(e,t,n){const o=Ko(e,n);if(o===void 0)return{min:e.min,max:e.max};const i=Math.log10(e.min),r=Math.log10(e.max),s=Math.log10(o),c=r-i,f=c*(t-1),d=Go(s,i,c,f);return{min:Math.pow(10,i+d.min),max:Math.pow(10,r-d.max)}}function Wr(e,t){return t&&(t[e.id]||t[e.axis])||{}}function lo(e,t,n,o,i){let r=n[o];if(r==="original"){const s=e.originalScaleLimits[t.id][o];r=ae(s.options,s.scale)}return ae(r,i)}function Ur(e,t,n){const o=e.getValueForPixel(t),i=e.getValueForPixel(n);return{min:Math.min(o,i),max:Math.max(o,i)}}function Vr(e,{min:t,max:n,minLimit:o,maxLimit:i},r){const s=(e-n+t)/2;t-=s,n+=s;const c=r.min.options??r.min.scale,f=r.max.options??r.max.scale,d=e/1e6;return Kn(t,c,d)&&(t=c),Kn(n,f,d)&&(n=f),t<o?(t=o,n=Math.min(o+e,i)):n>i&&(n=i,t=Math.max(i-e,o)),{min:t,max:n}}function Ce(e,{min:t,max:n},o,i=!1){const r=O(e.chart),{options:s}=e,c=Wr(e,o),{minRange:f=0}=c,d=lo(r,e,c,"min",-1/0),g=lo(r,e,c,"max",1/0);if(i==="pan"&&(t<d||n>g))return!0;const p=e.max-e.min,b=i?Math.max(n-t,f):p;if(i&&b===f&&p<=f)return!0;const T=Vr(b,{min:t,max:n,minLimit:d,maxLimit:g},r.originalScaleLimits[e.id]);return s.min=T.min,s.max=T.max,r.updatedScaleLimits[e.id]=T,e.parse(T.min)!==e.min||e.parse(T.max)!==e.max}function Zr(e,t,n,o){const i=Jo(e,t,n),r={min:e.min+i.min,max:e.max-i.max};return Ce(e,r,o,!0)}function qr(e,t,n,o){const i=Fr(e,t,n);return Ce(e,i,o,!0)}function Br(e,t,n,o){Ce(e,Ur(e,t,n),o,!0)}const co=e=>e===0||isNaN(e)?0:e<0?Math.min(Math.round(e),-1):Math.max(Math.round(e),1);function Gr(e){const n=e.getLabels().length-1;e.min>0&&(e.min-=1),e.max<n&&(e.max+=1)}function Kr(e,t,n,o){const i=Jo(e,t,n);e.min===e.max&&t<1&&Gr(e);const r={min:e.min+co(i.min),max:e.max-co(i.max)};return Ce(e,r,o,!0)}function Jr(e){return e.isHorizontal()?e.width:e.height}function Qr(e,t,n){const i=e.getLabels().length-1;let{min:r,max:s}=e;const c=Math.max(s-r,1),f=Math.round(Jr(e)/Math.max(c,10)),d=Math.round(Math.abs(t/f));let g;return t<-f?(s=Math.min(s+d,i),r=c===1?s:s-c,g=s===i):t>f&&(r=Math.max(0,r-d),s=c===1?r:r+c,g=r===0),Ce(e,{min:r,max:s},n)||g}const $r={second:500,minute:30*1e3,hour:1800*1e3,day:720*60*1e3,week:3.5*24*60*60*1e3,month:360*60*60*1e3,quarter:1440*60*60*1e3,year:4368*60*60*1e3};function Qo(e,t,n,o=!1){const{min:i,max:r,options:s}=e,c=s.time&&s.time.round,f=$r[c]||0,d=e.getValueForPixel(e.getPixelForValue(i+f)-t),g=e.getValueForPixel(e.getPixelForValue(r+f)-t);return isNaN(d)||isNaN(g)?!0:Ce(e,{min:d,max:g},n,o?"pan":!1)}function uo(e,t,n){return Qo(e,t,n,!0)}const rn={category:Kr,default:Zr,logarithmic:qr},sn={default:Br},an={category:Qr,default:Qo,logarithmic:uo,timeseries:uo};function es(e,t,n){const{id:o,options:{min:i,max:r}}=e;if(!t[o]||!n[o])return!0;const s=n[o];return s.min!==i||s.max!==r}function fo(e,t){ve(e,(n,o)=>{t[o]||delete e[o]})}function Xe(e,t){const{scales:n}=e,{originalScaleLimits:o,updatedScaleLimits:i}=t;return ve(n,function(r){es(r,o,i)&&(o[r.id]={min:{scale:r.min,options:r.options.min},max:{scale:r.max,options:r.options.max}})}),fo(o,n),fo(i,n),o}function ho(e,t,n,o){const i=rn[e.type]||rn.default;C(i,[e,t,n,o])}function go(e,t,n,o){const i=sn[e.type]||sn.default;C(i,[e,t,n,o])}function ts(e){const t=e.chartArea;return{x:(t.left+t.right)/2,y:(t.top+t.bottom)/2}}function Sn(e,t,n="none",o="api"){const{x:i=1,y:r=1,focalPoint:s=ts(e)}=typeof t=="number"?{x:t,y:t}:t,c=O(e),{options:{limits:f,zoom:d}}=c;Xe(e,c);const g=i!==1,p=r!==1,b=Bo(d,s,e);ve(b||e.scales,function(T){T.isHorizontal()&&g?ho(T,i,s,f):!T.isHorizontal()&&p&&ho(T,r,s,f)}),e.update(n),C(d.onZoom,[{chart:e,trigger:o}])}function $o(e,t,n,o="none",i="api"){const r=O(e),{options:{limits:s,zoom:c}}=r,{mode:f="xy"}=c;Xe(e,r);const d=be(f,"x",e),g=be(f,"y",e);ve(e.scales,function(p){p.isHorizontal()&&d?go(p,t.x,n.x,s):!p.isHorizontal()&&g&&go(p,t.y,n.y,s)}),e.update(o),C(c.onZoom,[{chart:e,trigger:i}])}function ns(e,t,n,o="none",i="api"){const r=O(e);Xe(e,r);const s=e.scales[t];Ce(s,n,void 0,!0),e.update(o),C(r.options.zoom?.onZoom,[{chart:e,trigger:i}])}function os(e,t="default"){const n=O(e),o=Xe(e,n);ve(e.scales,function(i){const r=i.options;o[i.id]?(r.min=o[i.id].min.options,r.max=o[i.id].max.options):(delete r.min,delete r.max),delete n.updatedScaleLimits[i.id]}),e.update(t),C(n.options.zoom.onZoomComplete,[{chart:e}])}function is(e,t){const n=e.originalScaleLimits[t];if(!n)return;const{min:o,max:i}=n;return ae(i.options,i.scale)-ae(o.options,o.scale)}function rs(e){const t=O(e);let n=1,o=1;return ve(e.scales,function(i){const r=is(t,i.id);if(r){const s=Math.round(r/(i.max-i.min)*100)/100;n=Math.min(n,s),o=Math.max(o,s)}}),n<1?n:o}function mo(e,t,n,o){const{panDelta:i}=o,r=i[e.id]||0;Jn(r)===Jn(t)&&(t+=r);const s=an[e.type]||an.default;C(s,[e,t,n])?i[e.id]=0:i[e.id]=t}function ei(e,t,n,o="none"){const{x:i=0,y:r=0}=typeof t=="number"?{x:t,y:t}:t,s=O(e),{options:{pan:c,limits:f}}=s,{onPan:d}=c||{};Xe(e,s);const g=i!==0,p=r!==0;ve(n||e.scales,function(b){b.isHorizontal()&&g?mo(b,i,f,s):!b.isHorizontal()&&p&&mo(b,r,f,s)}),e.update(o),C(d,[{chart:e}])}function ti(e){const t=O(e);Xe(e,t);const n={};for(const o of Object.keys(e.scales)){const{min:i,max:r}=t.originalScaleLimits[o]||{min:{},max:{}};n[o]={min:i.scale,max:r.scale}}return n}function ss(e){const t=O(e),n={};for(const o of Object.keys(e.scales))n[o]=t.updatedScaleLimits[o];return n}function as(e){const t=ti(e);for(const n of Object.keys(e.scales)){const{min:o,max:i}=t[n];if(o!==void 0&&e.scales[n].min!==o||i!==void 0&&e.scales[n].max!==i)return!0}return!1}function po(e){const t=O(e);return t.panning||t.dragging}const bo=(e,t,n)=>Math.min(n,Math.max(t,e));function j(e,t){const{handlers:n}=O(e),o=n[t];o&&o.target&&(o.target.removeEventListener(t,o),delete n[t])}function st(e,t,n,o){const{handlers:i,options:r}=O(e),s=i[n];if(s&&s.target===t)return;j(e,n),i[n]=f=>o(e,f,r),i[n].target=t;const c=n==="wheel"?!1:void 0;t.addEventListener(n,i[n],{passive:c})}function ls(e,t){const n=O(e);n.dragStart&&(n.dragging=!0,n.dragEnd=t,e.update("none"))}function cs(e,t){const n=O(e);!n.dragStart||t.key!=="Escape"||(j(e,"keydown"),n.dragging=!1,n.dragStart=n.dragEnd=null,e.update("none"))}function ln(e,t){if(e.target!==t.canvas){const n=t.canvas.getBoundingClientRect();return{x:e.clientX-n.left,y:e.clientY-n.top}}return bn(e,t)}function ni(e,t,n){const{onZoomStart:o,onZoomRejected:i}=n;if(o){const r=ln(t,e);if(C(o,[{chart:e,event:t,point:r}])===!1)return C(i,[{chart:e,event:t}]),!1}}function us(e,t){if(e.legend){const r=bn(t,e);if(ir(r,e.legend))return}const n=O(e),{pan:o,zoom:i={}}=n.options;if(t.button!==0||qo(at(o),t)||xn(at(i.drag),t))return C(i.onZoomRejected,[{chart:e,event:t}]);ni(e,t,i)!==!1&&(n.dragStart=t,st(e,e.canvas.ownerDocument,"mousemove",ls),st(e,window.document,"keydown",cs))}function fs({begin:e,end:t},n){let o=t.x-e.x,i=t.y-e.y;const r=Math.abs(o/i);r>n?o=Math.sign(o)*Math.abs(i*n):r<n&&(i=Math.sign(i)*Math.abs(o/n)),t.x=e.x+o,t.y=e.y+i}function yo(e,t,n,{min:o,max:i,prop:r}){e[o]=bo(Math.min(n.begin[r],n.end[r]),t[o],t[i]),e[i]=bo(Math.max(n.begin[r],n.end[r]),t[o],t[i])}function ds(e,t,n){const o={begin:ln(t.dragStart,e),end:ln(t.dragEnd,e)};if(n){const i=e.chartArea.width/e.chartArea.height;fs(o,i)}return o}function oi(e,t,n,o){const i=be(t,"x",e),r=be(t,"y",e),{top:s,left:c,right:f,bottom:d,width:g,height:p}=e.chartArea,b={top:s,left:c,right:f,bottom:d},T=ds(e,n,o&&i&&r);i&&yo(b,e.chartArea,T,{min:"left",max:"right",prop:"x"}),r&&yo(b,e.chartArea,T,{min:"top",max:"bottom",prop:"y"});const P=b.right-b.left,E=b.bottom-b.top;return{...b,width:P,height:E,zoomX:i&&P?1+(g-P)/g:1,zoomY:r&&E?1+(p-E)/p:1}}function hs(e,t){const n=O(e);if(!n.dragStart)return;j(e,"mousemove");const{mode:o,onZoomComplete:i,drag:{threshold:r=0,maintainAspectRatio:s}}=n.options.zoom,c=oi(e,o,{dragStart:n.dragStart,dragEnd:t},s),f=be(o,"x",e)?c.width:0,d=be(o,"y",e)?c.height:0,g=Math.sqrt(f*f+d*d);if(n.dragStart=n.dragEnd=null,g<=r){n.dragging=!1,e.update("none");return}$o(e,{x:c.left,y:c.top},{x:c.right,y:c.bottom},"zoom","drag"),n.dragging=!1,n.filterNextClick=!0,C(i,[{chart:e}])}function gs(e,t,n){if(xn(at(n.wheel),t)){C(n.onZoomRejected,[{chart:e,event:t}]);return}if(ni(e,t,n)!==!1&&(t.cancelable&&t.preventDefault(),t.deltaY!==void 0))return!0}function ms(e,t){const{handlers:{onZoomComplete:n},options:{zoom:o}}=O(e);if(!gs(e,t,o))return;const i=t.target.getBoundingClientRect(),r=o.wheel.speed,s=t.deltaY>=0?2-1/(1-r):1+r,c={x:s,y:s,focalPoint:{x:t.clientX-i.left,y:t.clientY-i.top}};Sn(e,c,"zoom","wheel"),C(n,[{chart:e}])}function ps(e,t,n,o){n&&(O(e).handlers[t]=Xr(()=>C(n,[{chart:e}]),o))}function bs(e,t){const n=e.canvas,{wheel:o,drag:i,onZoomComplete:r}=t.zoom;o.enabled?(st(e,n,"wheel",ms),ps(e,"onZoomComplete",r,250)):j(e,"wheel"),i.enabled?(st(e,n,"mousedown",us),st(e,n.ownerDocument,"mouseup",hs)):(j(e,"mousedown"),j(e,"mousemove"),j(e,"mouseup"),j(e,"keydown"))}function ys(e){j(e,"mousedown"),j(e,"mousemove"),j(e,"mouseup"),j(e,"wheel"),j(e,"click"),j(e,"keydown")}function vs(e,t){return function(n,o){const{pan:i,zoom:r={}}=t.options;if(!i||!i.enabled)return!1;const s=o&&o.srcEvent;return s&&!t.panning&&o.pointerType==="mouse"&&(xn(at(i),s)||qo(at(r.drag),s))?(C(i.onPanRejected,[{chart:e,event:o}]),!1):!0}}function Ts(e,t){const n=Math.abs(e.clientX-t.clientX),o=Math.abs(e.clientY-t.clientY),i=n/o;let r,s;return i>.3&&i<1.7?r=s=!0:n>o?r=!0:s=!0,{x:r,y:s}}function ii(e,t,n){if(t.scale){const{center:o,pointers:i}=n,r=1/t.scale*n.scale,s=n.target.getBoundingClientRect(),c=Ts(i[0],i[1]),f=t.options.zoom.mode,d={x:c.x&&be(f,"x",e)?r:1,y:c.y&&be(f,"y",e)?r:1,focalPoint:{x:o.x-s.left,y:o.y-s.top}};Sn(e,d,"zoom","pinch"),t.scale=n.scale}}function ws(e,t,n){if(t.options.zoom.pinch.enabled){const o=bn(n,e);C(t.options.zoom.onZoomStart,[{chart:e,event:n,point:o}])===!1?(t.scale=null,C(t.options.zoom.onZoomRejected,[{chart:e,event:n}])):t.scale=1}}function xs(e,t,n){t.scale&&(ii(e,t,n),t.scale=null,C(t.options.zoom.onZoomComplete,[{chart:e}]))}function ri(e,t,n){const o=t.delta;o&&(t.panning=!0,ei(e,{x:n.deltaX-o.x,y:n.deltaY-o.y},t.panScales),t.delta={x:n.deltaX,y:n.deltaY})}function Ss(e,t,n){const{enabled:o,onPanStart:i,onPanRejected:r}=t.options.pan;if(!o)return;const s=n.target.getBoundingClientRect(),c={x:n.center.x-s.left,y:n.center.y-s.top};if(C(i,[{chart:e,event:n,point:c}])===!1)return C(r,[{chart:e,event:n}]);t.panScales=Bo(t.options.pan,c,e),t.delta={x:0,y:0},ri(e,t,n)}function Ps(e,t){t.delta=null,t.panning&&(t.panning=!1,t.filterNextClick=!0,C(t.options.pan.onPanComplete,[{chart:e}]))}const cn=new WeakMap;function vo(e,t){const n=O(e),o=e.canvas,{pan:i,zoom:r}=t,s=new rt.Manager(o);r&&r.pinch.enabled&&(s.add(new rt.Pinch),s.on("pinchstart",c=>ws(e,n,c)),s.on("pinch",c=>ii(e,n,c)),s.on("pinchend",c=>xs(e,n,c))),i&&i.enabled&&(s.add(new rt.Pan({threshold:i.threshold,enable:vs(e,n)})),s.on("panstart",c=>Ss(e,n,c)),s.on("panmove",c=>ri(e,n,c)),s.on("panend",()=>Ps(e,n))),cn.set(e,s)}function To(e){const t=cn.get(e);t&&(t.remove("pinchstart"),t.remove("pinch"),t.remove("pinchend"),t.remove("panstart"),t.remove("pan"),t.remove("panend"),t.destroy(),cn.delete(e))}function Es(e,t){const{pan:n,zoom:o}=e,{pan:i,zoom:r}=t;return o?.zoom?.pinch?.enabled!==r?.zoom?.pinch?.enabled||n?.enabled!==i?.enabled||n?.threshold!==i?.threshold}var Ms="2.2.0";function Mt(e,t,n){const o=n.zoom.drag,{dragStart:i,dragEnd:r}=O(e);if(o.drawTime!==t||!r)return;const{left:s,top:c,width:f,height:d}=oi(e,n.zoom.mode,{dragStart:i,dragEnd:r},o.maintainAspectRatio),g=e.ctx;g.save(),g.beginPath(),g.fillStyle=o.backgroundColor||"rgba(225,225,225,0.3)",g.fillRect(s,c,f,d),o.borderWidth>0&&(g.lineWidth=o.borderWidth,g.strokeStyle=o.borderColor||"rgba(225,225,225)",g.strokeRect(s,c,f,d)),g.restore()}var tl={id:"zoom",version:Ms,defaults:{pan:{enabled:!1,mode:"xy",threshold:10,modifierKey:null},zoom:{wheel:{enabled:!1,speed:.1,modifierKey:null},drag:{enabled:!1,drawTime:"beforeDatasetsDraw",modifierKey:null},pinch:{enabled:!1},mode:"xy"}},start:function(e,t,n){const o=O(e);o.options=n,Object.prototype.hasOwnProperty.call(n.zoom,"enabled")&&console.warn("The option `zoom.enabled` is no longer supported. Please use `zoom.wheel.enabled`, `zoom.drag.enabled`, or `zoom.pinch.enabled`."),(Object.prototype.hasOwnProperty.call(n.zoom,"overScaleMode")||Object.prototype.hasOwnProperty.call(n.pan,"overScaleMode"))&&console.warn("The option `overScaleMode` is deprecated. Please use `scaleMode` instead (and update `mode` as desired)."),rt&&vo(e,n),e.pan=(i,r,s)=>ei(e,i,r,s),e.zoom=(i,r)=>Sn(e,i,r),e.zoomRect=(i,r,s)=>$o(e,i,r,s),e.zoomScale=(i,r,s)=>ns(e,i,r,s),e.resetZoom=i=>os(e,i),e.getZoomLevel=()=>rs(e),e.getInitialScaleBounds=()=>ti(e),e.getZoomedScaleBounds=()=>ss(e),e.isZoomedOrPanned=()=>as(e),e.isZoomingOrPanning=()=>po(e)},beforeEvent(e,{event:t}){if(po(e))return!1;if(t.type==="click"||t.type==="mouseup"){const n=O(e);if(n.filterNextClick)return n.filterNextClick=!1,!1}},beforeUpdate:function(e,t,n){const o=O(e),i=o.options;o.options=n,Es(i,n)&&(To(e),vo(e,n)),bs(e,n)},beforeDatasetsDraw(e,t,n){Mt(e,"beforeDatasetsDraw",n)},afterDatasetsDraw(e,t,n){Mt(e,"afterDatasetsDraw",n)},beforeDraw(e,t,n){Mt(e,"beforeDraw",n)},afterDraw(e,t,n){Mt(e,"afterDraw",n)},stop:function(e){ys(e),rt&&To(e),jr(e)},panFunctions:an,zoomFunctions:rn,zoomRectFunctions:sn};const wo={modes:{point(e,t){return Ct(e,t,{intersect:!0})},nearest(e,t,n){return Os(e,t,n)},x(e,t,n){return Ct(e,t,{intersect:n.intersect,axis:"x"})},y(e,t,n){return Ct(e,t,{intersect:n.intersect,axis:"y"})}}};function Pn(e,t,n){return(wo.modes[n.mode]||wo.modes.nearest)(e,t,n)}function Cs(e,t,n){return n!=="x"&&n!=="y"?e.inRange(t.x,t.y,"x",!0)||e.inRange(t.x,t.y,"y",!0):e.inRange(t.x,t.y,n,!0)}function _s(e,t,n){return n==="x"?{x:e.x,y:t.y}:n==="y"?{x:t.x,y:e.y}:t}function Ct(e,t,n){return e.filter(o=>n.intersect?o.inRange(t.x,t.y):Cs(o,t,n.axis))}function Os(e,t,n){let o=Number.POSITIVE_INFINITY;return Ct(e,t,n).reduce((i,r)=>{const s=r.getCenterPoint(),c=_s(t,s,n.axis),f=yn(t,c);return f<o?(i=[r],o=f):f===o&&i.push(r),i},[]).sort((i,r)=>i._index-r._index).slice(0,1)}function _e(e,t,n){const o=Math.cos(n),i=Math.sin(n),r=t.x,s=t.y;return{x:r+o*(e.x-r)-i*(e.y-s),y:s+i*(e.x-r)+o*(e.y-s)}}const As=(e,t)=>t>e||e.length>t.length&&e.slice(0,t.length)===t,Pe=.001,At=(e,t,n)=>Math.min(n,Math.max(t,e)),si=(e,t)=>e.value>=e.start-t&&e.value<=e.end+t;function Is(e,t,n){for(const o of Object.keys(e))e[o]=At(e[o],t,n);return e}function ks(e,t,n,o){return!e||!t||n<=0?!1:Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)<=Math.pow(n+o,2)}function ai(e,{x:t,y:n,x2:o,y2:i},r,{borderWidth:s,hitTolerance:c}){const f=(s+c)/2,d=e.x>=t-f-Pe&&e.x<=o+f+Pe,g=e.y>=n-f-Pe&&e.y<=i+f+Pe;return r==="x"?d:(r==="y"||d)&&g}function li(e,{rect:t,center:n},o,{rotation:i,borderWidth:r,hitTolerance:s}){const c=_e(e,n,ue(-i));return ai(c,t,o,{borderWidth:r,hitTolerance:s})}function Oe(e,t){const{centerX:n,centerY:o}=e.getProps(["centerX","centerY"],t);return{x:n,y:o}}function Ds(e,t,n,o=!0){const i=n.split(".");let r=0;for(const s of t.split(".")){const c=i[r++];if(parseInt(s,10)<parseInt(c,10))break;if(As(c,s)){if(o)throw new Error(`${e} v${n} is not supported. v${t} or newer is required.`);return!1}}return!0}const ci=e=>typeof e=="string"&&e.endsWith("%"),ui=e=>parseFloat(e)/100,fi=e=>At(ui(e),0,1),tt=(e,t)=>({x:e,y:t,x2:e,y2:t,width:0,height:0}),Rs={box:e=>tt(e.centerX,e.centerY),doughnutLabel:e=>tt(e.centerX,e.centerY),ellipse:e=>({centerX:e.centerX,centerY:e.centerX,radius:0,width:0,height:0}),label:e=>tt(e.centerX,e.centerY),line:e=>tt(e.x,e.y),point:e=>({centerX:e.centerX,centerY:e.centerY,radius:0,width:0,height:0}),polygon:e=>tt(e.centerX,e.centerY)};function En(e,t){return t==="start"?0:t==="end"?e:ci(t)?fi(t)*e:e/2}function ye(e,t,n=!0){return typeof t=="number"?t:ci(t)?(n?fi(t):ui(t))*e:e}function Ns(e,t){const{x:n,width:o}=e,i=t.textAlign;return i==="center"?n+o/2:i==="end"||i==="right"?n+o:n}function di(e,t,{borderWidth:n,position:o,xAdjust:i,yAdjust:r},s){const c=Ye(s),f=t.width+(c?s.width:0)+n,d=t.height+(c?s.height:0)+n,g=Mn(o),p=xo(e.x,f,i,g.x),b=xo(e.y,d,r,g.y);return{x:p,y:b,x2:p+f,y2:b+d,width:f,height:d,centerX:p+f/2,centerY:b+d/2}}function Mn(e,t="center"){return Ye(e)?{x:ae(e.x,t),y:ae(e.y,t)}:(e=ae(e,t),{x:e,y:e})}const hi=(e,t)=>e&&e.autoFit&&t<1;function gi(e,t){const n=e.font,o=Le(n)?n:[n];return hi(e,t)?o.map(function(i){const r=Bt(i);return r.size=Math.floor(i.size*t),r.lineHeight=i.lineHeight,Bt(r)}):o.map(i=>Bt(i))}function mi(e){return e&&(le(e.xValue)||le(e.yValue))}function xo(e,t,n=0,o){return e-En(t,o)+n}function He(e,t,n){const o=n.init;if(o){if(o===!0)return bi(t,n)}else return;return Ys(e,t,n)}function pi(e,t,n){let o=!1;return t.forEach(i=>{Ne(e[i])?(o=!0,n[i]=e[i]):le(n[i])&&delete n[i]}),o}function bi(e,t){const n=t.type||"line";return Rs[n](e)}function Ys(e,t,n){const o=C(n.init,[{chart:e,properties:t,options:n}]);if(o===!0)return bi(t,n);if(Ye(o))return o}const en=new Map,Ls=e=>isNaN(e)||e<=0,zs=e=>e.reduce(function(t,n){return t+=n.string,t},"");function It(e){if(e&&typeof e=="object"){const t=e.toString();return t==="[object HTMLImageElement]"||t==="[object HTMLCanvasElement]"}}function kt(e,{x:t,y:n},o){o&&(e.translate(t,n),e.rotate(ue(o)),e.translate(-t,-n))}function ce(e,t){if(t&&t.borderWidth)return e.lineCap=t.borderCapStyle||"butt",e.setLineDash(t.borderDash),e.lineDashOffset=t.borderDashOffset,e.lineJoin=t.borderJoinStyle||"miter",e.lineWidth=t.borderWidth,e.strokeStyle=t.borderColor,!0}function je(e,t){e.shadowColor=t.backgroundShadowColor,e.shadowBlur=t.shadowBlur,e.shadowOffsetX=t.shadowOffsetX,e.shadowOffsetY=t.shadowOffsetY}function Dt(e,t){const n=t.content;if(It(n))return{width:ye(n.width,t.width),height:ye(n.height,t.height)};const o=gi(t),i=t.textStrokeWidth,r=Le(n)?n:[n],s=r.join()+zs(o)+i+(e._measureText?"-spriting":"");return en.has(s)||en.set(s,Fs(e,r,o,i)),en.get(s)}function yi(e,t,n){const{x:o,y:i,width:r,height:s}=t;e.save(),je(e,n);const c=ce(e,n);e.fillStyle=n.backgroundColor,e.beginPath(),ar(e,{x:o,y:i,w:r,h:s,radius:Is(lr(n.borderRadius),0,Math.min(r,s)/2)}),e.closePath(),e.fill(),c&&(e.shadowColor=n.borderShadowColor,e.stroke()),e.restore()}function vi(e,t,n,o){const i=n.content;if(It(i)){e.save(),e.globalAlpha=Vs(n.opacity,i.style.opacity),e.drawImage(i,t.x,t.y,t.width,t.height),e.restore();return}const r=Le(i)?i:[i],s=gi(n,o),c=n.color,f=Le(c)?c:[c],d=Ns(t,n),g=t.y+n.textStrokeWidth/2;e.save(),e.textBaseline="middle",e.textAlign=n.textAlign,Xs(e,n)&&Ws(e,{x:d,y:g},r,s),Us(e,{x:d,y:g},r,{fonts:s,colors:f}),e.restore()}function Xs(e,t){if(t.textStrokeWidth>0)return e.lineJoin="round",e.miterLimit=2,e.lineWidth=t.textStrokeWidth,e.strokeStyle=t.textStrokeColor,!0}function Hs(e,t,n,o){const{radius:i,options:r}=t,s=r.pointStyle,c=r.rotation;let f=(c||0)*jo;if(It(s)){e.save(),e.translate(n,o),e.rotate(f),e.drawImage(s,-s.width/2,-s.height/2,s.width,s.height),e.restore();return}Ls(i)||js(e,{x:n,y:o,radius:i,rotation:c,style:s,rad:f})}function js(e,{x:t,y:n,radius:o,rotation:i,style:r,rad:s}){let c,f,d,g;switch(e.beginPath(),r){default:e.arc(t,n,o,0,Wo),e.closePath();break;case"triangle":e.moveTo(t+Math.sin(s)*o,n-Math.cos(s)*o),s+=Qn,e.lineTo(t+Math.sin(s)*o,n-Math.cos(s)*o),s+=Qn,e.lineTo(t+Math.sin(s)*o,n-Math.cos(s)*o),e.closePath();break;case"rectRounded":g=o*.516,d=o-g,c=Math.cos(s+et)*d,f=Math.sin(s+et)*d,e.arc(t-c,n-f,g,s-G,s-xt),e.arc(t+f,n-c,g,s-xt,s),e.arc(t+c,n+f,g,s,s+xt),e.arc(t-f,n+c,g,s+xt,s+G),e.closePath();break;case"rect":if(!i){d=Math.SQRT1_2*o,e.rect(t-d,n-d,2*d,2*d);break}s+=et;case"rectRot":c=Math.cos(s)*o,f=Math.sin(s)*o,e.moveTo(t-c,n-f),e.lineTo(t+f,n-c),e.lineTo(t+c,n+f),e.lineTo(t-f,n+c),e.closePath();break;case"crossRot":s+=et;case"cross":c=Math.cos(s)*o,f=Math.sin(s)*o,e.moveTo(t-c,n-f),e.lineTo(t+c,n+f),e.moveTo(t+f,n-c),e.lineTo(t-f,n+c);break;case"star":c=Math.cos(s)*o,f=Math.sin(s)*o,e.moveTo(t-c,n-f),e.lineTo(t+c,n+f),e.moveTo(t+f,n-c),e.lineTo(t-f,n+c),s+=et,c=Math.cos(s)*o,f=Math.sin(s)*o,e.moveTo(t-c,n-f),e.lineTo(t+c,n+f),e.moveTo(t+f,n-c),e.lineTo(t-f,n+c);break;case"line":c=Math.cos(s)*o,f=Math.sin(s)*o,e.moveTo(t-c,n-f),e.lineTo(t+c,n+f);break;case"dash":e.moveTo(t,n),e.lineTo(t+Math.cos(s)*o,n+Math.sin(s)*o);break}e.fill()}function Fs(e,t,n,o){e.save();const i=t.length;let r=0,s=o;for(let c=0;c<i;c++){const f=n[Math.min(c,n.length-1)];e.font=f.string;const d=t[c];r=Math.max(r,e.measureText(d).width+o),s+=f.lineHeight}return e.restore(),{width:r,height:s}}function Ws(e,{x:t,y:n},o,i){e.beginPath();let r=0;o.forEach(function(s,c){const f=i[Math.min(c,i.length-1)],d=f.lineHeight;e.font=f.string,e.strokeText(s,t,n+d/2+r),r+=d}),e.stroke()}function Us(e,{x:t,y:n},o,{fonts:i,colors:r}){let s=0;o.forEach(function(c,f){const d=r[Math.min(f,r.length-1)],g=i[Math.min(f,i.length-1)],p=g.lineHeight;e.beginPath(),e.font=g.string,e.fillStyle=d,e.fillText(c,t,n+p/2+s),s+=p,e.fill()})}function Vs(e,t){const n=$n(e)?e:t;return $n(n)?At(n,0,1):1}const Ti=["left","bottom","top","right"];function Zs(e,t){const{pointX:n,pointY:o,options:i}=t,r=i.callout,s=r&&r.display&&Js(t,r);if(!s||$s(t,r,s))return;if(e.save(),e.beginPath(),!ce(e,r))return e.restore();const{separatorStart:f,separatorEnd:d}=qs(t,s),{sideStart:g,sideEnd:p}=Gs(t,s,f);(r.margin>0||i.borderWidth===0)&&(e.moveTo(f.x,f.y),e.lineTo(d.x,d.y)),e.moveTo(g.x,g.y),e.lineTo(p.x,p.y);const b=_e({x:n,y:o},t.getCenterPoint(),ue(-t.rotation));e.lineTo(b.x,b.y),e.stroke(),e.restore()}function qs(e,t){const{x:n,y:o,x2:i,y2:r}=e,s=Bs(e,t);let c,f;return t==="left"||t==="right"?(c={x:n+s,y:o},f={x:c.x,y:r}):(c={x:n,y:o+s},f={x:i,y:c.y}),{separatorStart:c,separatorEnd:f}}function Bs(e,t){const{width:n,height:o,options:i}=e,r=i.callout.margin+i.borderWidth/2;return t==="right"?n+r:t==="bottom"?o+r:-r}function Gs(e,t,n){const{y:o,width:i,height:r,options:s}=e,c=s.callout.start,f=Ks(t,s.callout);let d,g;return t==="left"||t==="right"?(d={x:n.x,y:o+ye(r,c)},g={x:d.x+f,y:d.y}):(d={x:n.x+ye(i,c),y:n.y},g={x:d.x,y:d.y+f}),{sideStart:d,sideEnd:g}}function Ks(e,t){const n=t.side;return e==="left"||e==="top"?-n:n}function Js(e,t){const n=t.position;return Ti.includes(n)?n:Qs(e,t)}function Qs(e,t){const{x:n,y:o,x2:i,y2:r,width:s,height:c,pointX:f,pointY:d,centerX:g,centerY:p,rotation:b}=e,T={x:g,y:p},P=t.start,E=ye(s,P),Y=ye(c,P),R=[n,n+E,n+E,i],M=[o+Y,r,o,r],L=[];for(let N=0;N<4;N++){const K=_e({x:R[N],y:M[N]},T,ue(b));L.push({position:Ti[N],distance:yn(K,{x:f,y:d})})}return L.sort((N,K)=>N.distance-K.distance)[0].position}function $s(e,t,n){const{pointX:o,pointY:i}=e,r=t.margin;let s=o,c=i;return n==="left"?s+=r:n==="right"?s-=r:n==="top"?c+=r:n==="bottom"&&(c-=r),e.inRange(s,c)}const So={xScaleID:{min:"xMin",max:"xMax",start:"left",end:"right",startProp:"x",endProp:"x2"},yScaleID:{min:"yMin",max:"yMax",start:"bottom",end:"top",startProp:"y",endProp:"y2"}};function ze(e,t,n){return t=typeof t=="number"?t:e.parse(t),Fo(t)?e.getPixelForValue(t):n}function Ee(e,t,n){const o=t[n];if(o||n==="scaleID")return o;const i=n.charAt(0),r=Object.values(e).filter(s=>s.axis&&s.axis===i);return r.length?r[0].id:i}function wi(e,t){if(e){const n=e.options.reverse,o=ze(e,t.min,n?t.end:t.start),i=ze(e,t.max,n?t.start:t.end);return{start:o,end:i}}}function xi(e,t){const{chartArea:n,scales:o}=e,i=o[Ee(o,t,"xScaleID")],r=o[Ee(o,t,"yScaleID")];let s=n.width/2,c=n.height/2;return i&&(s=ze(i,t.xValue,i.left+i.width/2)),r&&(c=ze(r,t.yValue,r.top+r.height/2)),{x:s,y:c}}function Cn(e,t){const n=e.scales,o=n[Ee(n,t,"xScaleID")],i=n[Ee(n,t,"yScaleID")];if(!o&&!i)return{};let{left:r,right:s}=o||e.chartArea,{top:c,bottom:f}=i||e.chartArea;const d=Po(o,{min:t.xMin,max:t.xMax,start:r,end:s});r=d.start,s=d.end;const g=Po(i,{min:t.yMin,max:t.yMax,start:f,end:c});return c=g.start,f=g.end,{x:r,y:c,x2:s,y2:f,width:s-r,height:f-c,centerX:r+(s-r)/2,centerY:c+(f-c)/2}}function Si(e,t){if(!mi(t)){const n=Cn(e,t);let o=t.radius;(!o||isNaN(o))&&(o=Math.min(n.width,n.height)/2,t.radius=o);const i=o*2,r=n.centerX+t.xAdjust,s=n.centerY+t.yAdjust;return{x:r-o,y:s-o,x2:r+o,y2:s+o,centerX:r,centerY:s,width:i,height:i,radius:o}}return ta(e,t)}function ea(e,t){const{scales:n,chartArea:o}=e,i=n[t.scaleID],r={x:o.left,y:o.top,x2:o.right,y2:o.bottom};return i?na(i,r,t):oa(n,r,t),r}function Pi(e,t){const n=Cn(e,t);return n.initProperties=He(e,n,t),n.elements=[{type:"label",optionScope:"label",properties:sa(e,n,t),initProperties:n.initProperties}],n}function ta(e,t){const n=xi(e,t),o=t.radius*2;return{x:n.x-t.radius+t.xAdjust,y:n.y-t.radius+t.yAdjust,x2:n.x+t.radius+t.xAdjust,y2:n.y+t.radius+t.yAdjust,centerX:n.x+t.xAdjust,centerY:n.y+t.yAdjust,radius:t.radius,width:o,height:o}}function Po(e,t){const n=wi(e,t)||t;return{start:Math.min(n.start,n.end),end:Math.max(n.start,n.end)}}function na(e,t,n){const o=ze(e,n.value,NaN),i=ze(e,n.endValue,o);e.isHorizontal()?(t.x=o,t.x2=i):(t.y=o,t.y2=i)}function oa(e,t,n){for(const o of Object.keys(So)){const i=e[Ee(e,n,o)];if(i){const{min:r,max:s,start:c,end:f,startProp:d,endProp:g}=So[o],p=wi(i,{min:n[r],max:n[s],start:i[c],end:i[f]});t[d]=p.start,t[g]=p.end}}}function ia({properties:e,options:t},n,o,i){const{x:r,x2:s,width:c}=e;return Ei({start:r,end:s,borderWidth:t.borderWidth},{position:o.x,padding:{start:i.left,end:i.right},adjust:t.label.xAdjust,size:n.width})}function ra({properties:e,options:t},n,o,i){const{y:r,y2:s,height:c}=e;return Ei({start:r,end:s,borderWidth:t.borderWidth},{position:o.y,padding:{start:i.top,end:i.bottom},adjust:t.label.yAdjust,size:n.height})}function Ei(e,t){const{start:n,end:o,borderWidth:i}=e,{position:r,padding:{start:s,end:c},adjust:f}=t,d=o-i-n-s-c-t.size;return n+i/2+f+En(d,r)}function sa(e,t,n){const o=n.label;o.backgroundColor="transparent",o.callout.display=!1;const i=Mn(o.position),r=Ot(o.padding),s=Dt(e.ctx,o),c=ia({properties:t,options:n},s,i,r),f=ra({properties:t,options:n},s,i,r),d=s.width+r.width,g=s.height+r.height;return{x:c,y:f,x2:c+d,y2:f+g,width:d,height:g,centerX:c+d/2,centerY:f+g/2,rotation:o.rotation}}const un=["enter","leave"],_n=un.concat("click");function aa(e,t,n){t.listened=pi(n,_n,t.listeners),t.moveListened=!1,un.forEach(o=>{Ne(n[o])&&(t.moveListened=!0)}),(!t.listened||!t.moveListened)&&t.annotations.forEach(o=>{!t.listened&&Ne(o.click)&&(t.listened=!0),t.moveListened||un.forEach(i=>{Ne(o[i])&&(t.listened=!0,t.moveListened=!0)})})}function la(e,t,n){if(e.listened)switch(t.type){case"mousemove":case"mouseout":return ca(e,t,n);case"click":return ua(e,t,n)}}function ca(e,t,n){if(!e.moveListened)return;let o;t.type==="mousemove"?o=Pn(e.visibleElements,t,n.interaction):o=[];const i=e.hovered;e.hovered=o;const r={state:e,event:t};let s=Eo(r,"leave",i,o);return Eo(r,"enter",o,i)||s}function Eo({state:e,event:t},n,o,i){let r;for(const s of o)i.indexOf(s)<0&&(r=Mi(s.options[n]||e.listeners[n],s,t)||r);return r}function ua(e,t,n){const o=e.listeners,i=Pn(e.visibleElements,t,n.interaction);let r;for(const s of i)r=Mi(s.options.click||o.click,s,t)||r;return r}function Mi(e,t,n){return C(e,[t.$context,n])===!0}const _t=["afterDraw","beforeDraw"];function fa(e,t,n){const o=t.visibleElements;t.hooked=pi(n,_t,t.hooks),t.hooked||o.forEach(i=>{t.hooked||_t.forEach(r=>{Ne(i.options[r])&&(t.hooked=!0)})})}function Mo(e,t,n){if(e.hooked){const o=t.options[n]||e.hooks[n];return C(o,[t.$context])}}function da(e,t,n){const o=ba(e.scales,t,n);let i=Co(t,o,"min","suggestedMin");i=Co(t,o,"max","suggestedMax")||i,i&&Ne(t.handleTickRangeOptions)&&t.handleTickRangeOptions()}function ha(e,t){for(const n of e)ma(n,t)}function Co(e,t,n,o){if(Fo(t[n])&&!ga(e.options,n,o)){const i=e[n]!==t[n];return e[n]=t[n],i}}function ga(e,t,n){return le(e[t])||le(e[n])}function ma(e,t){for(const n of["scaleID","xScaleID","yScaleID"]){const o=Ee(t,e,n);o&&!t[o]&&pa(e,n)&&console.warn(`No scale found with id '${o}' for annotation '${e.id}'`)}}function pa(e,t){if(t==="scaleID")return!0;const n=t.charAt(0);for(const o of["Min","Max","Value"])if(le(e[n+o]))return!0;return!1}function ba(e,t,n){const o=t.axis,i=t.id,r=o+"ScaleID",s={min:ae(t.min,Number.NEGATIVE_INFINITY),max:ae(t.max,Number.POSITIVE_INFINITY)};for(const c of n)c.scaleID===i?_o(c,t,["value","endValue"],s):Ee(e,c,r)===i&&_o(c,t,[o+"Min",o+"Max",o+"Value"],s);return s}function _o(e,t,n,o){for(const i of n){const r=e[i];if(le(r)){const s=t.parse(r);o.min=Math.min(o.min,s),o.max=Math.max(o.max,s)}}}class Fe extends Me{inRange(t,n,o,i){const{x:r,y:s}=_e({x:t,y:n},this.getCenterPoint(i),ue(-this.options.rotation));return ai({x:r,y:s},this.getProps(["x","y","x2","y2"],i),o,this.options)}getCenterPoint(t){return Oe(this,t)}draw(t){t.save(),kt(t,this.getCenterPoint(),this.options.rotation),yi(t,this,this.options),t.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(t,n){return Pi(t,n)}}Fe.id="boxAnnotation";Fe.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:1,display:!0,init:void 0,hitTolerance:0,label:{backgroundColor:"transparent",borderWidth:0,callout:{display:!1},color:"black",content:null,display:!1,drawTime:void 0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,hitTolerance:void 0,opacity:void 0,padding:6,position:"center",rotation:void 0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0,z:void 0},rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};Fe.defaultRoutes={borderColor:"color",backgroundColor:"color"};Fe.descriptors={label:{_fallback:!0}};class Rt extends Me{inRange(t,n,o,i){return li({x:t,y:n},{rect:this.getProps(["x","y","x2","y2"],i),center:this.getCenterPoint(i)},o,{rotation:this.rotation,borderWidth:0,hitTolerance:this.options.hitTolerance})}getCenterPoint(t){return Oe(this,t)}draw(t){const n=this.options;!n.display||!n.content||(Sa(t,this),t.save(),kt(t,this.getCenterPoint(),this.rotation),vi(t,this,n,this._fitRatio),t.restore())}resolveElementProperties(t,n){const o=ya(t,n);if(!o)return{};const{controllerMeta:i,point:r,radius:s}=Ta(t,n,o);let c=Dt(t.ctx,n);const f=wa(c,s);hi(n,f)&&(c={width:c.width*f,height:c.height*f});const{position:d,xAdjust:g,yAdjust:p}=n,b=di(r,c,{borderWidth:0,position:d,xAdjust:g,yAdjust:p});return{initProperties:He(t,b,n),...b,...i,rotation:n.rotation,_fitRatio:f}}}Rt.id="doughnutLabelAnnotation";Rt.defaults={autoFit:!0,autoHide:!0,backgroundColor:"transparent",backgroundShadowColor:"transparent",borderColor:"transparent",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderShadowColor:"transparent",borderWidth:0,color:"black",content:null,display:!0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:void 0},height:void 0,hitTolerance:0,init:void 0,opacity:void 0,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,spacing:1,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0};Rt.defaultRoutes={};function ya(e,t){return e.getSortedVisibleDatasetMetas().reduce(function(n,o){const i=o.controller;return i instanceof cr&&va(e,t,o.data)&&(!n||i.innerRadius<n.controller.innerRadius)&&i.options.circumference>=90?o:n},void 0)}function va(e,t,n){if(!t.autoHide)return!0;for(let o=0;o<n.length;o++)if(!n[o].hidden&&e.getDataVisibility(o))return!0}function Ta({chartArea:e},t,n){const{left:o,top:i,right:r,bottom:s}=e,{innerRadius:c,offsetX:f,offsetY:d}=n.controller,g=(o+r)/2+f,p=(i+s)/2+d,b={left:Math.max(g-c,o),right:Math.min(g+c,r),top:Math.max(p-c,i),bottom:Math.min(p+c,s)},T={x:(b.left+b.right)/2,y:(b.top+b.bottom)/2},P=t.spacing+t.borderWidth/2,E=c-P,Y=T.y>p,R=Y?i+P:s-P,M=xa(R,g,p,E);return{controllerMeta:{_centerX:g,_centerY:p,_radius:E,_counterclockwise:Y,...M},point:T,radius:Math.min(c,Math.min(b.right-b.left,b.bottom-b.top)/2)}}function wa({width:e,height:t},n){const o=Math.sqrt(Math.pow(e,2)+Math.pow(t,2));return n*2/o}function xa(e,t,n,o){const i=Math.pow(n-e,2),r=Math.pow(o,2),s=t*-2,c=Math.pow(t,2)+i-r,f=Math.pow(s,2)-4*c;if(f<=0)return{_startAngle:0,_endAngle:Wo};const d=(-s-Math.sqrt(f))/2,g=(-s+Math.sqrt(f))/2;return{_startAngle:eo({x:t,y:n},{x:d,y:e}).angle,_endAngle:eo({x:t,y:n},{x:g,y:e}).angle}}function Sa(e,t){const{_centerX:n,_centerY:o,_radius:i,_startAngle:r,_endAngle:s,_counterclockwise:c,options:f}=t;e.save();const d=ce(e,f);e.fillStyle=f.backgroundColor,e.beginPath(),e.arc(n,o,i,r,s,c),e.closePath(),e.fill(),d&&e.stroke(),e.restore()}class ct extends Me{inRange(t,n,o,i){return li({x:t,y:n},{rect:this.getProps(["x","y","x2","y2"],i),center:this.getCenterPoint(i)},o,{rotation:this.rotation,borderWidth:this.options.borderWidth,hitTolerance:this.options.hitTolerance})}getCenterPoint(t){return Oe(this,t)}draw(t){const n=this.options,o=!le(this._visible)||this._visible;!n.display||!n.content||!o||(t.save(),kt(t,this.getCenterPoint(),this.rotation),Zs(t,this),yi(t,this,n),vi(t,Pa(this),n),t.restore())}resolveElementProperties(t,n){let o;if(mi(n))o=xi(t,n);else{const{centerX:c,centerY:f}=Cn(t,n);o={x:c,y:f}}const i=Ot(n.padding),r=Dt(t.ctx,n),s=di(o,r,n,i);return{initProperties:He(t,s,n),pointX:o.x,pointY:o.y,...s,rotation:n.rotation}}}ct.id="labelAnnotation";ct.defaults={adjustScaleRange:!0,backgroundColor:"transparent",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:0,callout:{borderCapStyle:"butt",borderColor:void 0,borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:1,display:!1,margin:5,position:"auto",side:5,start:"50%"},color:"black",content:null,display:!0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:void 0},height:void 0,hitTolerance:0,init:void 0,opacity:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};ct.defaultRoutes={borderColor:"color"};function Pa({x:e,y:t,width:n,height:o,options:i}){const r=i.borderWidth/2,s=Ot(i.padding);return{x:e+s.left+r,y:t+s.top+r,width:n-s.left-s.right-i.borderWidth,height:o-s.top-s.bottom-i.borderWidth}}const On=(e,t,n)=>({x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}),fn=(e,t,n)=>On(t,n,Math.abs((e-t.y)/(n.y-t.y))).x,Oo=(e,t,n)=>On(t,n,Math.abs((e-t.x)/(n.x-t.x))).y,it=e=>e*e,Ea=(e,t,{x:n,y:o,x2:i,y2:r},s)=>s==="y"?{start:Math.min(o,r),end:Math.max(o,r),value:t}:{start:Math.min(n,i),end:Math.max(n,i),value:e},Ao=(e,t,n,o)=>(1-o)*(1-o)*e+2*(1-o)*o*t+o*o*n,dn=(e,t,n,o)=>({x:Ao(e.x,t.x,n.x,o),y:Ao(e.y,t.y,n.y,o)}),Io=(e,t,n,o)=>2*(1-o)*(t-e)+2*o*(n-t),ko=(e,t,n,o)=>-Math.atan2(Io(e.x,t.x,n.x,o),Io(e.y,t.y,n.y,o))+.5*G;class ut extends Me{inRange(t,n,o,i){const r=(this.options.borderWidth+this.options.hitTolerance)/2;if(o!=="x"&&o!=="y"){const s={mouseX:t,mouseY:n},{path:c,ctx:f}=this;if(c){ce(f,this.options),f.lineWidth+=this.options.hitTolerance;const{chart:g}=this.$context,p=t*g.currentDevicePixelRatio,b=n*g.currentDevicePixelRatio,T=f.isPointInStroke(c,p,b)||hn(this,s,i);return f.restore(),T}const d=it(r);return Oa(this,s,d,i)||hn(this,s,i)}return Ma(this,{mouseX:t,mouseY:n},o,{hitSize:r,useFinalPosition:i})}getCenterPoint(t){return Oe(this,t)}draw(t){const{x:n,y:o,x2:i,y2:r,cp:s,options:c}=this;if(t.save(),!ce(t,c))return t.restore();je(t,c);const f=Math.sqrt(Math.pow(i-n,2)+Math.pow(r-o,2));if(c.curve&&s)return La(t,this,s,f),t.restore();const{startOpts:d,endOpts:g,startAdjust:p,endAdjust:b}=Ci(this),T=Math.atan2(r-o,i-n);t.translate(n,o),t.rotate(T),t.beginPath(),t.moveTo(0+p,0),t.lineTo(f-b,0),t.shadowColor=c.borderShadowColor,t.stroke(),gn(t,0,p,d),gn(t,f,-b,g),t.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(t,n){const o=ea(t,n),{x:i,y:r,x2:s,y2:c}=o,f=Ca(o,t.chartArea),d=f?_a({x:i,y:r},{x:s,y:c},t.chartArea):{x:i,y:r,x2:s,y2:c,width:Math.abs(s-i),height:Math.abs(c-r)};if(d.centerX=(s+i)/2,d.centerY=(c+r)/2,d.initProperties=He(t,d,n),n.curve){const p={x:d.x,y:d.y},b={x:d.x2,y:d.y2};d.cp=Ya(d,n,yn(p,b))}const g=Aa(t,d,n.label);return g._visible=f,d.elements=[{type:"label",optionScope:"label",properties:g,initProperties:d.initProperties}],d}}ut.id="lineAnnotation";const Do={backgroundColor:void 0,backgroundShadowColor:void 0,borderColor:void 0,borderDash:void 0,borderDashOffset:void 0,borderShadowColor:void 0,borderWidth:void 0,display:void 0,fill:void 0,length:void 0,shadowBlur:void 0,shadowOffsetX:void 0,shadowOffsetY:void 0,width:void 0};ut.defaults={adjustScaleRange:!0,arrowHeads:{display:!1,end:Object.assign({},Do),fill:!1,length:12,start:Object.assign({},Do),width:6},borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:2,curve:!1,controlPoint:{y:"-50%"},display:!0,endValue:void 0,init:void 0,hitTolerance:0,label:{backgroundColor:"rgba(0,0,0,0.8)",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderColor:"black",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:6,borderShadowColor:"transparent",borderWidth:0,callout:Object.assign({},ct.defaults.callout),color:"#fff",content:null,display:!1,drawTime:void 0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,hitTolerance:void 0,opacity:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0,z:void 0},scaleID:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,value:void 0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};ut.descriptors={arrowHeads:{start:{_fallback:!0},end:{_fallback:!0},_fallback:!0}};ut.defaultRoutes={borderColor:"color"};function Ma(e,{mouseX:t,mouseY:n},o,{hitSize:i,useFinalPosition:r}){const s=Ea(t,n,e.getProps(["x","y","x2","y2"],r),o);return si(s,i)||hn(e,{mouseX:t,mouseY:n},r,o)}function Ca({x:e,y:t,x2:n,y2:o},{top:i,right:r,bottom:s,left:c}){return!(e<c&&n<c||e>r&&n>r||t<i&&o<i||t>s&&o>s)}function Ro({x:e,y:t},n,{top:o,right:i,bottom:r,left:s}){return e<s&&(t=Oo(s,{x:e,y:t},n),e=s),e>i&&(t=Oo(i,{x:e,y:t},n),e=i),t<o&&(e=fn(o,{x:e,y:t},n),t=o),t>r&&(e=fn(r,{x:e,y:t},n),t=r),{x:e,y:t}}function _a(e,t,n){const{x:o,y:i}=Ro(e,t,n),{x:r,y:s}=Ro(t,e,n);return{x:o,y:i,x2:r,y2:s,width:Math.abs(r-o),height:Math.abs(s-i)}}function Oa(e,{mouseX:t,mouseY:n},o=Pe,i){const{x:r,y:s,x2:c,y2:f}=e.getProps(["x","y","x2","y2"],i),d=c-r,g=f-s,p=it(d)+it(g),b=p===0?-1:((t-r)*d+(n-s)*g)/p;let T,P;return b<0?(T=r,P=s):b>1?(T=c,P=f):(T=r+b*d,P=s+b*g),it(t-T)+it(n-P)<=o}function hn(e,{mouseX:t,mouseY:n},o,i){const r=e.label;return r.options.display&&r.inRange(t,n,i,o)}function Aa(e,t,n){const o=n.borderWidth,i=Ot(n.padding),r=Dt(e.ctx,n),s=r.width+i.width+o,c=r.height+i.height+o;return ka(t,n,{width:s,height:c,padding:i},e.chartArea)}function Ia(e){const{x:t,y:n,x2:o,y2:i}=e,r=Math.atan2(i-n,o-t);return r>G/2?r-G:r<G/-2?r+G:r}function ka(e,t,n,o){const{width:i,height:r,padding:s}=n,{xAdjust:c,yAdjust:f}=t,d={x:e.x,y:e.y},g={x:e.x2,y:e.y2},p=t.rotation==="auto"?Ia(e):ue(t.rotation),b=Da(i,r,p),T=Ra(e,t,{labelSize:b,padding:s},o),P=e.cp?dn(d,e.cp,g,T):On(d,g,T),E={size:b.w,min:o.left,max:o.right,padding:s.left},Y={size:b.h,min:o.top,max:o.bottom,padding:s.top},R=Yo(P.x,E)+c,M=Yo(P.y,Y)+f;return{x:R-i/2,y:M-r/2,x2:R+i/2,y2:M+r/2,centerX:R,centerY:M,pointX:P.x,pointY:P.y,width:i,height:r,rotation:fr(p)}}function Da(e,t,n){const o=Math.cos(n),i=Math.sin(n);return{w:Math.abs(e*o)+Math.abs(t*i),h:Math.abs(e*i)+Math.abs(t*o)}}function Ra(e,t,n,o){let i;const r=Na(e,o);return t.position==="start"?i=No({w:e.x2-e.x,h:e.y2-e.y},n,t,r):t.position==="end"?i=1-No({w:e.x-e.x2,h:e.y-e.y2},n,t,r):i=En(1,t.position),i}function No(e,t,n,o){const{labelSize:i,padding:r}=t,s=e.w*o.dx,c=e.h*o.dy,f=s>0&&(i.w/2+r.left-o.x)/s,d=c>0&&(i.h/2+r.top-o.y)/c;return At(Math.max(f,d),0,.25)}function Na(e,t){const{x:n,x2:o,y:i,y2:r}=e,s=Math.min(i,r)-t.top,c=Math.min(n,o)-t.left,f=t.bottom-Math.max(i,r),d=t.right-Math.max(n,o);return{x:Math.min(c,d),y:Math.min(s,f),dx:c<=d?1:-1,dy:s<=f?1:-1}}function Yo(e,t){const{size:n,min:o,max:i,padding:r}=t,s=n/2;return n>i-o?(i+o)/2:(o>=e-r-s&&(e=o+r+s),i<=e+r+s&&(e=i-r-s),e)}function Ci(e){const t=e.options,n=t.arrowHeads&&t.arrowHeads.start,o=t.arrowHeads&&t.arrowHeads.end;return{startOpts:n,endOpts:o,startAdjust:Lo(e,n),endAdjust:Lo(e,o)}}function Lo(e,t){if(!t||!t.display)return 0;const{length:n,width:o}=t,i=e.options.borderWidth/2,r={x:n,y:o+i};return Math.abs(fn(0,r,{x:0,y:i}))}function gn(e,t,n,o){if(!o||!o.display)return;const{length:i,width:r,fill:s,backgroundColor:c,borderColor:f}=o,d=Math.abs(t-i)+n;e.beginPath(),je(e,o),ce(e,o),e.moveTo(d,-r),e.lineTo(t+n,0),e.lineTo(d,r),s===!0?(e.fillStyle=c||f,e.closePath(),e.fill(),e.shadowColor="transparent"):e.shadowColor=o.borderShadowColor,e.stroke()}function Ya(e,t,n){const{x:o,y:i,x2:r,y2:s,centerX:c,centerY:f}=e,d=Math.atan2(s-i,r-o),g=Mn(t.controlPoint,0),p={x:c+ye(n,g.x,!1),y:f+ye(n,g.y,!1)};return _e(p,{x:c,y:f},d)}function zo(e,{x:t,y:n},{angle:o,adjust:i},r){!r||!r.display||(e.save(),e.translate(t,n),e.rotate(o),gn(e,0,-i,r),e.restore())}function La(e,t,n,o){const{x:i,y:r,x2:s,y2:c,options:f}=t,{startOpts:d,endOpts:g,startAdjust:p,endAdjust:b}=Ci(t),T={x:i,y:r},P={x:s,y:c},E=ko(T,n,P,0),Y=ko(T,n,P,1)-G,R=dn(T,n,P,p/o),M=dn(T,n,P,1-b/o),L=new Path2D;e.beginPath(),L.moveTo(R.x,R.y),L.quadraticCurveTo(n.x,n.y,M.x,M.y),e.shadowColor=f.borderShadowColor,e.stroke(L),t.path=L,t.ctx=e,zo(e,R,{angle:E,adjust:p},d),zo(e,M,{angle:Y,adjust:b},g)}class ft extends Me{inRange(t,n,o,i){const r=this.options.rotation,s=(this.options.borderWidth+this.options.hitTolerance)/2;if(o!=="x"&&o!=="y")return za({x:t,y:n},this.getProps(["width","height","centerX","centerY"],i),r,s);const{x:c,y:f,x2:d,y2:g}=this.getProps(["x","y","x2","y2"],i),p=o==="y"?{start:f,end:g}:{start:c,end:d},b=_e({x:t,y:n},this.getCenterPoint(i),ue(-r));return b[o]>=p.start-s-Pe&&b[o]<=p.end+s+Pe}getCenterPoint(t){return Oe(this,t)}draw(t){const{width:n,height:o,centerX:i,centerY:r,options:s}=this;t.save(),kt(t,this.getCenterPoint(),s.rotation),je(t,this.options),t.beginPath(),t.fillStyle=s.backgroundColor;const c=ce(t,s);t.ellipse(i,r,o/2,n/2,G/2,0,2*G),t.fill(),c&&(t.shadowColor=s.borderShadowColor,t.stroke()),t.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(t,n){return Pi(t,n)}}ft.id="ellipseAnnotation";ft.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,label:Object.assign({},Fe.defaults.label),rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};ft.defaultRoutes={borderColor:"color",backgroundColor:"color"};ft.descriptors={label:{_fallback:!0}};function za(e,t,n,o){const{width:i,height:r,centerX:s,centerY:c}=t,f=i/2,d=r/2;if(f<=0||d<=0)return!1;const g=ue(n||0),p=Math.cos(g),b=Math.sin(g),T=Math.pow(p*(e.x-s)+b*(e.y-c),2),P=Math.pow(b*(e.x-s)-p*(e.y-c),2);return T/Math.pow(f+o,2)+P/Math.pow(d+o,2)<=1.0001}class Nt extends Me{inRange(t,n,o,i){const{x:r,y:s,x2:c,y2:f,width:d}=this.getProps(["x","y","x2","y2","width"],i),g=(this.options.borderWidth+this.options.hitTolerance)/2;return o!=="x"&&o!=="y"?ks({x:t,y:n},this.getCenterPoint(i),d/2,g):si(o==="y"?{start:s,end:f,value:n}:{start:r,end:c,value:t},g)}getCenterPoint(t){return Oe(this,t)}draw(t){const n=this.options,o=n.borderWidth;if(n.radius<.1)return;t.save(),t.fillStyle=n.backgroundColor,je(t,n);const i=ce(t,n);Hs(t,this,this.centerX,this.centerY),i&&!It(n.pointStyle)&&(t.shadowColor=n.borderShadowColor,t.stroke()),t.restore(),n.borderWidth=o}resolveElementProperties(t,n){const o=Si(t,n);return o.initProperties=He(t,o,n),o}}Nt.id="pointAnnotation";Nt.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,pointStyle:"circle",radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};Nt.defaultRoutes={borderColor:"color",backgroundColor:"color"};class Yt extends Me{inRange(t,n,o,i){if(o!=="x"&&o!=="y")return this.options.radius>=.1&&this.elements.length>1&&Ha(this.elements,t,n,i);const r=_e({x:t,y:n},this.getCenterPoint(i),ue(-this.options.rotation)),s=this.elements.map(d=>o==="y"?d.bY:d.bX),c=Math.min(...s),f=Math.max(...s);return r[o]>=c&&r[o]<=f}getCenterPoint(t){return Oe(this,t)}draw(t){const{elements:n,options:o}=this;t.save(),t.beginPath(),t.fillStyle=o.backgroundColor,je(t,o);const i=ce(t,o);let r=!0;for(const s of n)r?(t.moveTo(s.x,s.y),r=!1):t.lineTo(s.x,s.y);t.closePath(),t.fill(),i&&(t.shadowColor=o.borderShadowColor,t.stroke()),t.restore()}resolveElementProperties(t,n){const o=Si(t,n),{sides:i,rotation:r}=n,s=[],c=2*G/i;let f=r*jo;for(let d=0;d<i;d++,f+=c){const g=Xa(o,n,f);g.initProperties=He(t,o,n),s.push(g)}return o.elements=s,o}}Yt.id="polygonAnnotation";Yt.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,point:{radius:0},radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,sides:3,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};Yt.defaultRoutes={borderColor:"color",backgroundColor:"color"};function Xa({centerX:e,centerY:t},{radius:n,borderWidth:o,hitTolerance:i},r){const s=(o+i)/2,c=Math.sin(r),f=Math.cos(r),d={x:e+c*n,y:t-f*n};return{type:"point",optionScope:"point",properties:{x:d.x,y:d.y,centerX:d.x,centerY:d.y,bX:e+c*(n+s),bY:t-f*(n+s)}}}function Ha(e,t,n,o){let i=!1,r=e[e.length-1].getProps(["bX","bY"],o);for(const s of e){const c=s.getProps(["bX","bY"],o);c.bY>n!=r.bY>n&&t<(r.bX-c.bX)*(n-c.bY)/(r.bY-c.bY)+c.bX&&(i=!i),r=c}return i}const pe={box:Fe,doughnutLabel:Rt,ellipse:ft,label:ct,line:ut,point:Nt,polygon:Yt};Object.keys(pe).forEach(e=>{dr.describe(`elements.${pe[e].id}`,{_fallback:"plugins.annotation.common"})});const ja={update:Object.assign},Fa=_n.concat(_t),Xo=(e,t)=>Ye(t)?pn(e,t):e,mn=e=>e==="color"||e==="font";function An(e="line"){return pe[e]?e:(console.warn(`Unknown annotation type: '${e}', defaulting to 'line'`),"line")}function Wa(e,t,n,o){const i=Va(e,n.animations,o),r=t.annotations,s=Ba(t.elements,r);for(let c=0;c<r.length;c++){const f=r[c],d=_i(s,c,f.type),g=f.setContext(qa(e,d,s,f)),p=d.resolveElementProperties(e,g);p.skip=Ua(p),"elements"in p&&(Za(d,p.elements,g,i),delete p.elements),le(d.x)||Object.assign(d,p),Object.assign(d,p.initProperties),p.options=Oi(g),i.update(d,p)}}function Ua(e){return isNaN(e.x)||isNaN(e.y)}function Va(e,t,n){return n==="reset"||n==="none"||n==="resize"?ja:new ur(e,t)}function Za(e,t,n,o){const i=e.elements||(e.elements=[]);i.length=t.length;for(let r=0;r<t.length;r++){const s=t[r],c=s.properties,f=_i(i,r,s.type,s.initProperties),d=n[s.optionScope].override(s);c.options=Oi(d),o.update(f,c)}}function _i(e,t,n,o){const i=pe[An(n)];let r=e[t];return(!r||!(r instanceof i))&&(r=e[t]=new i,Object.assign(r,o)),r}function Oi(e){const t=pe[An(e.type)],n={};n.id=e.id,n.type=e.type,n.drawTime=e.drawTime,Object.assign(n,pn(e,t.defaults),pn(e,t.defaultRoutes));for(const o of Fa)n[o]=e[o];return n}function pn(e,t){const n={};for(const o of Object.keys(t)){const i=t[o],r=e[o];mn(o)&&Le(r)?n[o]=r.map(s=>Xo(s,i)):n[o]=Xo(r,i)}return n}function qa(e,t,n,o){return t.$context||(t.$context=Object.assign(Object.create(e.getContext()),{element:t,get elements(){return n.filter(i=>i&&i.options)},id:o.id,type:"annotation"}))}function Ba(e,t){const n=t.length,o=e.length;if(o<n){const i=n-o;e.splice(o,0,...new Array(i))}else o>n&&e.splice(n,o-n);return e}var Ga="3.1.0";const he=new Map,Ho=e=>e.type!=="doughnutLabel",Ka=_n.concat(_t);var nl={id:"annotation",version:Ga,beforeRegister(){Ds("chart.js","4.0",qt.version)},afterRegister(){qt.register(pe)},afterUnregister(){qt.unregister(pe)},beforeInit(e){he.set(e,{annotations:[],elements:[],visibleElements:[],listeners:{},listened:!1,moveListened:!1,hooks:{},hooked:!1,hovered:[]})},beforeUpdate(e,t,n){const o=he.get(e),i=o.annotations=[];let r=n.annotations;Ye(r)?Object.keys(r).forEach(s=>{const c=r[s];Ye(c)&&(c.id=s,i.push(c))}):Le(r)&&i.push(...r),ha(i.filter(Ho),e.scales)},afterDataLimits(e,t){const n=he.get(e);da(e,t.scale,n.annotations.filter(Ho).filter(o=>o.display&&o.adjustScaleRange))},afterUpdate(e,t,n){const o=he.get(e);aa(e,o,n),Wa(e,o,n,t.mode),o.visibleElements=o.elements.filter(i=>!i.skip&&i.options.display),fa(e,o,n)},beforeDatasetsDraw(e,t,n){nt(e,"beforeDatasetsDraw",n.clip)},afterDatasetsDraw(e,t,n){nt(e,"afterDatasetsDraw",n.clip)},beforeDatasetDraw(e,t,n){nt(e,t.index,n.clip)},beforeDraw(e,t,n){nt(e,"beforeDraw",n.clip)},afterDraw(e,t,n){nt(e,"afterDraw",n.clip)},beforeEvent(e,t,n){const o=he.get(e);la(o,t.event,n)&&(t.changed=!0)},afterDestroy(e){he.delete(e)},getAnnotations(e){const t=he.get(e);return t?t.elements:[]},_getAnnotationElementsAtEventForMode(e,t,n){return Pn(e,t,n)},defaults:{animations:{numbers:{properties:["x","y","x2","y2","width","height","centerX","centerY","pointX","pointY","radius"],type:"number"},colors:{properties:["backgroundColor","borderColor"],type:"color"}},clip:!0,interaction:{mode:void 0,axis:void 0,intersect:void 0},common:{drawTime:"afterDatasetsDraw",init:!1,label:{}}},descriptors:{_indexable:!1,_scriptable:e=>!Ka.includes(e)&&e!=="init",annotations:{_allKeys:!1,_fallback:(e,t)=>`elements.${pe[An(t.type)].id}`},interaction:{_fallback:!0},common:{label:{_indexable:mn,_fallback:!0},_indexable:mn}},additionalOptionScopes:[""]};function nt(e,t,n){const{ctx:o,chartArea:i}=e,r=he.get(e);n&&rr(o,i);const s=Ja(r.visibleElements,t).sort((c,f)=>c.element.options.z-f.element.options.z);for(const c of s)Qa(o,i,r,c);n&&sr(o)}function Ja(e,t){const n=[];for(const o of e)if(o.options.drawTime===t&&n.push({element:o,main:!0}),o.elements&&o.elements.length)for(const i of o.elements)i.options.display&&i.options.drawTime===t&&n.push({element:i});return n}function Qa(e,t,n,o){const i=o.element;o.main?(Mo(n,i,"beforeDraw"),i.draw(e,t),Mo(n,i,"afterDraw")):i.draw(e,t)}export{nn as C,nl as a,tl as p,el as r};
