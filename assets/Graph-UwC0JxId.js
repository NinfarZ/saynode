import{r as t,j as o,L as x}from"./vendor_react-CUnYz83R.js";import{C as g,y as w,z as v,B as y,F as E,G as k,I as j,J as L}from"./vendor_chartjs-CL1eZlUa.js";import{p as S,a as C}from"./vendor-kwXoq_W8.js";import{S as R}from"./index-CvM3GFL3.js";g.register(w,v,y,E,k,j,L,S,C);function M({url:l,label:i,color:u}){const[a,p]=t.useState(!1),[r,m]=t.useState([]),s=t.useRef(null),f=t.useMemo(()=>({responsive:!0,maintainAspectRatio:!1,spanGaps:!0,fill:!1,interaction:{intersect:!1},animation:!1,radius:0,scales:{x:{ticks:{maxTicksLimit:8,source:"auto"}},y:{type:"linear",grid:{drawTicks:!1}}},elements:{point:{radius:0},line:{borderWidth:2}},plugins:{tooltip:{animation:!1,mode:"nearest",intersect:!1},zoom:{zoom:{wheel:{enabled:!0,pinch:{enabled:!0}},mode:"x"}},annotation:a&&r.length>0?{annotations:Object.fromEntries(r.map((d,e)=>[`line${e}`,{type:"line",scaleID:"x",value:d,borderColor:"rgba(255,0,0,0.6)",borderWidth:2,label:{content:`Event ${e+1}`,enabled:!0}}]))}:{}}}),[r]);console.log(r),t.useEffect(()=>{(async()=>{try{const e=await fetch(l);if(!e.ok)throw new Error(`Failed: ${l}`);const h=await e.text(),n=new Worker(new URL("/saynode/assets/csvWorker-3Xahaztl.js",import.meta.url),{type:"module"});n.onmessage=c=>{s.current=c.data,n.terminate(),p(!0),m(c.data.downtrendIndices)},n.postMessage(h)}catch(e){console.error("Worker CSV load failed",e)}})()},[]);const b=t.useMemo(()=>!a||!s.current?null:{labels:s.current.labels,datasets:[{label:i,borderColor:u,data:s.current.values}]},[a]);return a?o.jsxs("div",{className:"border-b-5 drop-shadow-amber-100 shadow-xl border-l border-r border-b-blue-600/50 w-full h-[700px] lg:aspect-video rounded-lg overflow-hidden relative bg-white p-5",children:[o.jsx("h2",{className:"text-2xl text-start font-semibold mb-4 text-gray-800",children:i}),o.jsx(x,{data:b,options:f})]}):o.jsx(R,{})}export{M as default};
